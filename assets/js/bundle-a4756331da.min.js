!function r(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.musics=n.sounds=void 0;var r="./assets/audio",o={silence:["".concat(r,"/silence.webm"),"".concat(r,"/silence.mp3")],gameLogoAppears:["".concat(r,"/gameLogoAppears.webm"),"".concat(r,"/gameLogoAppears.mp3")],changeItem:["".concat(r,"/changeItem.webm"),"".concat(r,"/changeItem.mp3")],selectItem:["".concat(r,"/selectItem.webm"),"".concat(r,"/selectItem.mp3")],clockTick:["".concat(r,"/clockTick.webm"),"".concat(r,"/clockTick.mp3")],boatMove:["".concat(r,"/boatMove.webm"),"".concat(r,"/boatMove.mp3")],probeDown:["".concat(r,"/probeDown.webm"),"".concat(r,"/probeDown.mp3")],probeUp:["".concat(r,"/probeUp.webm"),"".concat(r,"/probeUp.mp3")],probeHit:["".concat(r,"/probeHit.webm"),"".concat(r,"/probeHit.mp3")],probeMiss:["".concat(r,"/probeMiss.webm"),"".concat(r,"/probeMiss.mp3")],revealSeaFloor:["".concat(r,"/revealSeaFloor.webm"),"".concat(r,"/revealSeaFloor.mp3")],treasureOpen:["".concat(r,"/treasureOpen.webm"),"".concat(r,"/treasureOpen.mp3")],gameOverWin:["".concat(r,"/gameOverWin.webm"),"".concat(r,"/gameOverWin.mp3")],gameOverLose:["".concat(r,"/gameOverLose.webm"),"".concat(r,"/gameOverLose.mp3")]};n.sounds=o;r={title:["".concat(r,"/silence.webm"),"".concat(r,"/silence.mp3")],menu:["".concat(r,"/silence.webm"),"".concat(r,"/silence.mp3")],play:["".concat(r,"/silence.webm"),"".concat(r,"/silence.mp3")]};n.musics=r},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./audio"))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function n(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.audioButton=document.createElement("div"),this.audioButton.classList.add("audio-button"),this.muteIcon=document.createElement("i"),this.muteIcon.classList.add("fas","fa-sm","fa-volume-up"),this.audioButton.appendChild(this.muteIcon),this.unmuteIcon=document.createElement("i"),this.unmuteIcon.classList.add("fas","fa-volume-mute"),this.audioButton.appendChild(this.unmuteIcon);var t=this.audioChangeHandler.bind(this);o.default.on("mute",t),o.default.on("unmute",t),o.default.on("unlock",t),this.audioChangeHandler(),this.audioButton.onpointerup=function(){return e.tryToggleAudio()},this.element=this.audioButton}var e,t,r;return e=n,(t=[{key:"_isOn",value:function(){return!o.default.isMuted()&&o.default.isUnlocked()}},{key:"audioChangeHandler",value:function(){var e=this._isOn();this.muteIcon.style.display=e?"block":"none",this.unmuteIcon.style.display=e?"none":"block"}},{key:"tryToggleAudio",value:function(){o.default.mute(this._isOn())}}])&&i(e.prototype,t),r&&i(e,r),n}();n.default=a},{"./audio":3}],3:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Music=n.Sound=n.Jukebox=n.default=void 0;var i=e("events"),u=e("howler"),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./audio-resources"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function l(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function r(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function f(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function p(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){f(r,t,n,o,i,"next",e)}function i(e){f(r,t,n,o,i,"throw",e)}o(void 0)})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var m=function(){function t(e){d(this,t),this._loadFunc=e,this._cache={}}var n;return h(t,[{key:"load",value:(n=p(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=JSON.stringify(t),null!==(r=(n=this._cache)[o])&&void 0!==r||(n[o]=this._loadFunc(t)),e.next=4,this._cache[o];case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(),v=function(){function i(e){var t=this;d(this,i),this._howl=e,this._howl.on("fade",function(e){return t._howl.stop(e)}),this._howl.on("stop",function(e){return i._playingSounds.delete(e)}),this._howl.on("end",function(e){return i._playingSounds.delete(e)})}var t;return h(i,[{key:"play",value:function(){var t=this;if(A.isUnlocked()){var n=this._howl.play(),r=function(){return t._howl.playing(n)},e={isPlaying:r,stop:function(){var e;r()&&(e=t._howl.volume(n),t._howl.fade(e,0,250*e,n))}};return i._playingSounds.set(n,e),e}var o=!0,e=function(){o=!1};return setTimeout(e,this._howl.duration()),{isPlaying:function(){return o},stop:e}}}],[{key:"stop",value:function(){i._playingSounds.forEach(function(e){return e.stop()})}},{key:"create",value:(t=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="string"==typeof t?[t]:t,e.next=3,i._loader.load(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"_init",value:function(){i._loader=new m(_),i._playingSounds=new Map}}]),i}();(n.Sound=v)._init();var y=function(){function n(e){var t=this;d(this,n),this._howl=e,this._howl.on("fade",function(e){return t._howl.stop(e)}),this._isPlaying=!1,this._id=null}return h(n,[{key:"play",value:function(){this._isPlaying||(this._isPlaying=!0,this._id=this._howl.play())}},{key:"stop",value:function(){var e;this._isPlaying&&(this._isPlaying=!1,null!==this._id&&(e=this._howl.volume(this._id),this._howl.fade(e,0,500*e,this._id),this._id=null))}},{key:"isPlaying",value:function(){return this._isPlaying}}]),n}(),g=function(){function e(){d(this,e),this._loader=new m(x),this._loops={0:new y(new u.Howl({src:s.sounds.silence,preload:!0,loop:!0}))},this._currentLoopId=0,this._counter=0}var t;return h(e,[{key:"isPlaying",value:function(e){e=this._loops[e];return void 0!==e&&e.isPlaying()}},{key:"play",value:function(e){e=0<arguments.length&&void 0!==e?e:this._currentLoopId;this._currentLoopId!==e&&this._loops[this._currentLoopId].stop(),this._currentLoopId=e;e=this._loops[e];e.isPlaying()||e.play()}},{key:"stop",value:function(e){void 0!==e&&e!==this._currentLoopId||this._loops[this._currentLoopId].stop()}},{key:"addLoop",value:(t=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=++this._counter,e.next=3,this._loader.load(t);case 3:return this._loops[n]=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}(),b=function(){function r(e){d(this,r),this._id=e}var t;return h(r,[{key:"isPlaying",value:function(){return r._controller.isPlaying(this._id)}},{key:"play",value:function(){r._controller.play(this._id)}},{key:"playFromStart",value:function(){this.play(),this.stop()}},{key:"stop",value:function(){r._controller.stop(this._id)}},{key:"name",get:function(){return this._id}}],[{key:"stop",value:function(){r._controller.stop()}},{key:"create",value:(t=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="string"==typeof t?[t]:t,e.next=3,r._controller.addLoop(t);case 3:return n=e.sent,e.abrupt("return",new r(n));case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"_init",value:function(){r._controller=new g}}]),r}();function _(e){return w.apply(this,arguments)}function w(){return(w=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({src:t,loop:!1});case 2:return n=e.sent,e.abrupt("return",new v(n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e){return O.apply(this,arguments)}function O(){return(O=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({src:t,loop:!0});case 2:return n=e.sent,e.abrupt("return",new y(n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(){return T.apply(this,arguments)}function T(){return(T=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.Howl(r(r({},t),{},{preload:!1})),e.next=3,new Promise(function(e,t){n.once("load",e),n.once("loaderror",t),n.load()});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}(n.Music=b)._init();var A=function(){function n(){d(this,n)}var r,o;return h(n,null,[{key:"registerSound",value:(o=p(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this._sounds[t])throw new Error("Sound with name ".concat(t," already registered."));e.next=4;break;case 4:return e.next=6,v.create(n);case 6:return e.abrupt("return",this._sounds[t]=e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"hasSound",value:function(e){return void 0!==this._sounds[e]}},{key:"getSound",value:function(e){return this._sounds[e]}},{key:"registerMusic",value:(r=p(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this._musics[t])throw new Error("Music with name ".concat(t," already registered."));e.next=4;break;case 4:return e.next=6,b.create(n);case 6:return e.abrupt("return",this._musics[t]=e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"hasMusic",value:function(e){return void 0!==this._musics[e]}},{key:"getMusic",value:function(e){return this._musics[e]}},{key:"isMuted",value:function(){return n._isMuted}},{key:"mute",value:function(e){u.Howler.mute(e),n._isMuted!==e&&(n._isMuted=e,n._eventEmitter.emit(e?"mute":"unmute"))}},{key:"isUnlocked",value:function(){return n._isAudioUnlocked}},{key:"on",value:function(e,t){n._eventEmitter.on(e,t)}},{key:"off",value:function(e,t){n._eventEmitter.off(e,t)}},{key:"once",value:function(e,t){n._eventEmitter.once(e,t)}},{key:"_init",value:function(){n._eventEmitter=new i.EventEmitter,n._sounds={},n._musics={},n._isMuted=!1,n._isAudioUnlocked=!1,new u.Howl({src:s.sounds.silence,autoplay:!0,preload:!0,onplay:function(){n._isAudioUnlocked=!0,n._eventEmitter.emit("unlock")}})}}]),n}();(n.Jukebox=n.default=A)._init()},{"./audio-resources":1,events:32,howler:33}],4:[function(e,t,n){"use strict";function s(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.lower=e,this.upper=t,this.treasureWidth=n}var e,t,n;return e=r,(t=[{key:"getNextProbeLocation",value:function(e,t){return Math.max(this.lower,Math.min(t.x,this.upper))}},{key:"clamp",value:function(e){return Math.max(this.lower,Math.min(e,this.upper))}},{key:"getAdjacentTangentDistance",value:function(t,e){var n=this;console.assert(this.lower<=t&&t<=this.upper,"x=".concat(t," out of range [").concat(this.lower,",").concat(this.upper,"]"));var r=e.filter(function(e){return n.lower<=e.x&&e.x<n.upper}).reduce(function(e,t){return e.add(t.x)},new Set).add(this.lower).add(this.upper),o=Array.from(r.values()).sort(),i=o.findIndex(function(e){return t<=e}),e=o[Math.max(0,i-1)],r=o[i];return console.log(o,t,i),r-e}},{key:"getOppositeTangentDistance",value:function(e,t,n,r,o,i,a){console.assert(this.lower<=t&&t<=this.upper,"x=".concat(t," out of range [").concat(this.lower,",").concat(this.upper,"]")),console.assert(this.lower<=e&&e<=this.upper,"tangentX=".concat(e," out of range [").concat(this.lower,",").concat(this.upper,"]"));o={x:this.lower,value:r,slope:o},a={x:this.upper,value:i,slope:a};if(e<t){var u=n.map(function(e){return e.x}).findIndex(function(e){return t<=e});return-1===u?a:n[u]}u=s(n).reverse(),n=u.map(function(e){return e.x}).findIndex(function(e){return e<=t});return-1===n?o:u[n]}},{key:"buildTangentPairsInRange",value:function(n,e,t,r,o){var i=this;return(n=n.filter(function(e){return i.lower<=e.x&&e.x<=i.upper})).unshift({x:this.lower,value:e,slope:t}),n.push({x:this.upper,value:r,slope:o}),Array.from({length:n.length-1},function(e,t){return{left:n[t],right:n[t+1]}})}},{key:"findLargestUnknownTerritory",value:function(e){var t=this;return this.buildTangentPairsInRange(e,0,0,0,0).filter(function(e){return e.right.x-e.left.x>=t.treasureWidth}).reduce(function(e,t){return t.right.x-t.left.x>e.right.x-e.left.x?t:e})}}])&&o(e.prototype,t),n&&o(e,n),r}();n.default=i},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./base"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return e=r?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=1/Math.pow(2,7),d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,i["default"]);var r=l(o);function o(e,t,n){return a(this,o),(n=r.call(this,e,t,n)).gda=null,n.lastTarget=null,n.locations=new Set,n}return s(o,[{key:"getNextProbeLocation",value:function(t,e){var n,r=this;if(null===this.lastTarget)n=e.x;else{var o=t.find(function(e){return e.x===r.lastTarget})||null;if(null===o)n=this.lastTarget;else try{n=this.getNextProbeLocationLocal(o,t)}catch(e){console.log("BotStrategyGradientDescent",e.message),n=this.getNextProbeLocationGlobal(t)}}return this.locations.add(n),this.lastTarget=n}},{key:"getNextProbeLocationLocal",value:function(e,t){if(console.log("BotStrategyGradientDescent","Local step with ",e),Math.abs(e.slope)<.2)throw new Error("Local minimum reached");var n;null===this.gda&&(this.locations.add(e.x),this.gda=new h);do{n=this.clamp(this.gda.step(e));var r=this.getOppositeTangentDistance(this.gda.lastArmijoTangent.x,n,t),o=Math.abs(this.gda.lastArmijoTangent.x-r.x),i=this.gda.lastArmijoTangent.slope*r.slope<0,r=o<this.treasureWidth;if(console.log("oppositeTangentDistance",o,"tooNarrow",r),n===this.gda.lastArmijoTangent.x||i&&r)throw new Error("No local progress possible")}while(this.locations.has(n));return n}},{key:"getNextProbeLocationGlobal",value:function(t){var n=this;console.log("BotStrategyGradientDescent","Global step");try{var r=t.filter(function(e){return Math.abs(e.slope)<.2}).reduce(function(e,t){return t.value>e.value?t:e},0),e=t.filter(function(e){return e.value>=r&&!n.locations.has(e.x)}),e=e.reduce(function(e,t){return e.value>t.value?e:t});return this.locations.add(e.x),this.gda=null,this.getNextProbeLocationLocal(e)}catch(e){this.gda=null;var o=this.findLargestUnknownTerritory(t);return(o.left.x+o.right.x)/2}}}]),o}();n.default=d;var h=function(){function e(){a(this,e),this.lastArmijoTangent=null,this.alpha=p}return s(e,[{key:"step",value:function(e){if(this.lastArmijoTangent||(this.lastArmijoTangent=e,this.alpha=p),e.value>this.lastArmijoTangent.value+.5*this.alpha*Math.abs(this.lastArmijoTangent.slope))return this.lastArmijoTangent=e,this.alpha=p,this.step(e);var t=this.lastArmijoTangent.x+this.alpha*this.lastArmijoTangent.slope;return console.log("alpha",this.alpha,"t",e,"x",t),this.alpha*=.5,t}}]),e}()},{"./base":4}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./base"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,i["default"]);var e,t,n,r=s(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(t=[{key:"getNextProbeLocation",value:function(){return this.lower+(this.upper-this.lower)*Math.random()}}])&&a(e.prototype,t),n&&a(e,n),o}();n.default=l},{"./base":4}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./base"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,i["default"]);var e,t,n,r=s(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(t=[{key:"getNextProbeLocation",value:function(e){var u=this;return this.buildTangentPairsInRange(e,0,.5,0,-.5).filter(function(e){return e.right.x-e.left.x>=u.treasureWidth}).map(function(e){return o=e.left,i=e.right,a=u.treasureWidth/2,t=function(e,t){var n={x:e.x,y:e.value},r={x:1,y:e.slope},o={x:t.x,y:t.value},i={x:-1,y:-t.slope},r={start:n,end:f(n,r)},i={start:o,end:f(o,i)},i=function(e,t){var n=e.end.x-e.start.x,r=e.end.y-e.start.y,o=t.end.x-t.start.x,i=t.end.y-t.start.y,a=i*n-o*r;if(0==a)return null;var u=e.start.x-t.start.x,t=e.start.y-t.start.y,a=(o*t-i*u)/a;return{x:e.start.x+a*n,y:e.start.y+a*r}}(r,i);return null!==i&&e.x<i.x&&i.x<t.x?i:null}(o,i),n={x:(o.x+i.x)/2,y:(o.value+i.value)/2},r={x:n.x,y:o.value+o.slope*(i.x-o.x)},e={x:n.x,y:i.value-i.slope*(i.x-o.x)},n=[t,n,r,e].filter(function(e){return null!==e}).map(function(e){return Object.assign(e,{weight:(t=i,n=e,r=a,(e=o).value<=n.y&&t.value<=n.y?1+n.y:n.y*(t.x-e.x-2*r))});var t,n,r}).reduce(function(e,t){return e.weight>t.weight?e:t}),r=o.x+a,e=i.x-a,n.x=Math.max(r,Math.min(n.x,e)),n;var o,i,a,t,n,r}).reduce(function(e,t){return e.weight>t.weight?e:t}).x}}])&&a(e.prototype,t),n&&a(e,n),o}();function f(e,t){return{x:e.x+t.x,y:e.y+t.y}}n.default=l},{"./base":4}],8:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.states=Array(e).fill(null).map(function(e){return{left:!1,right:!1,action:!1,language:!1}}),this.statesModified=!1}var e,n,r;return e=t,(n=[{key:"modifyState",value:function(e,t,n){this.states[e][t]!==n&&(this.states[e][t]=n,this.statesModified=!0)}},{key:"getStates",value:function(){if(this.statesModified){var e=this.states;return this.states=this.states.map(function(e){return Object.assign({},e)}),this.statesModified=!1,e}return this.states}}])&&o(e.prototype,n),r&&o(e,r),t}();n.default=r},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./controls"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p(n);return e=r?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,i["default"]);var e,t,n,r=f(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,e)}return e=o,(t=[{key:"updateState",value:function(){var r=this;this.states=a(this.states),Array.from(navigator.getGamepads()).filter(function(e){return null!==e&&e.index<r.states.length}).forEach(function(e){var t,n;r.modifyState(e.index,"left",e.axes[0]<-.5||null!==(t=null===(t=e.buttons[14])||void 0===t?void 0:t.pressed)&&void 0!==t&&t),r.modifyState(e.index,"right",.5<e.axes[0]||null!==(n=null===(n=e.buttons[15])||void 0===n?void 0:n.pressed)&&void 0!==n&&n),r.modifyState(e.index,"action",null!==(n=null===(n=e.buttons[1])||void 0===n?void 0:n.pressed)&&void 0!==n&&n||null!==(n=null===(n=e.buttons[2])||void 0===n?void 0:n.pressed)&&void 0!==n&&n),r.modifyState(e.index,"language",null!==(e=null===(e=e.buttons[8])||void 0===e?void 0:e.pressed)&&void 0!==e&&e)})}},{key:"getStates",value:function(){return this.updateState(),c(p(o.prototype),"getStates",this).call(this)}}])&&s(e.prototype,t),n&&s(e,n),o}();n.default=d},{"./controls":8}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./controls"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return e=r?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c={ArrowLeft:{id:0,prop:"left"},ArrowRight:{id:0,prop:"right"},ArrowDown:{id:0,prop:"action"},Space:{id:0,prop:"action"},KeyL:{id:0,prop:"language"},KeyA:{id:1,prop:"left"},KeyD:{id:1,prop:"right"},KeyS:{id:1,prop:"action"}},l=Object.keys(c);function f(e){l.includes(e.code)&&e.preventDefault()}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(o,i["default"]);var t=u(o);function o(n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r=t.call(this,n);function e(e){var t=c[e.code];t&&t.id<n&&r.modifyState(t.id,t.prop,"keydown"===e.type)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),window.addEventListener("keydown",f,!1),r}return o}();n.default=p},{"./controls":8}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./controls"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,i["default"]);var e,t,n,r=s(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).element=document.createElement("div"),t.element.classList.add("screen-controls"),t.element.classList.add("with-".concat(e,"-controls"));for(var n=0;n<t.states.length;++n)t.element.appendChild(t.buildControl(n));return t.mousePressedButton=null,window.addEventListener("mouseup",function(){null!==t.mousePressedButton&&(t.modifyState(t.mousePressedButton.id,t.mousePressedButton.name,!1),t.mousePressedButton.element.classList.remove("active"),t.mousePressedButton=null)}),t}return e=o,(t=[{key:"buildControl",value:function(r){var o=this,e=document.createElement("div");e.classList.add("screen-control","screen-control-".concat(r));function t(t){var n=document.createElement("button");function e(e){0<e.targetTouches.length?(o.modifyState(r,t,!0),n.classList.add("active")):(o.modifyState(r,t,!1),n.classList.remove("active")),e.preventDefault()}return n.setAttribute("type","button"),n.classList.add(t),n.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchmove",e,{passive:!1}),n.addEventListener("touchend",e,{passive:!1}),n.addEventListener("touchcancel",e,{passive:!1}),n.addEventListener("mousedown",function(){o.modifyState(r,t,!0),n.classList.add("active"),o.mousePressedButton={id:r,name:t,element:n}}),n}return e.appendChild(t("left")),e.appendChild(t("action")),e.appendChild(t("right")),e}}])&&a(e.prototype,t),n&&a(e,n),o}();n.default=l},{"./controls":8}],12:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.fullScreenButton=document.createElement("div"),this.fullScreenButton.classList.add("fullscreen-button"),this.expandIcon=document.createElement("i"),this.expandIcon.classList.add("fas","fa-sm","fa-expand"),this.fullScreenButton.appendChild(this.expandIcon),this.compressIcon=document.createElement("i"),this.compressIcon.classList.add("fas","fa-compress"),this.fullScreenButton.appendChild(this.compressIcon),window.addEventListener("fullscreenchange",function(){return e.fullScreenChangeHandler()}),this.fullScreenChangeHandler(),this.fullScreenButton.onpointerup=function(){return e.toggleFullScreen()},this.element=this.fullScreenButton}var e,n,r;return e=t,(n=[{key:"fullScreenChangeHandler",value:function(){this.expandIcon.style.display=document.fullscreenElement?"none":"block",this.compressIcon.style.display=document.fullscreenElement?"block":"none"}},{key:"toggleFullScreen",value:function(){document.fullscreenEnabled?document.fullscreenElement?document.exitFullscreen().catch(function(e){return console.log(e)}):document.documentElement.requestFullscreen().catch(function(e){return console.log(e)}):console.log("Your browser cannot use fullscreen right now")}}])&&o(e.prototype,n),r&&o(e,r),t}();n.default=r},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./game-mode-menu"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(n);return e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=["none","random","gradient-descent","tangent-intersection"],p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,i["default"]);var e,t,n,r=c(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(t=[{key:"getMenuTitleKeys",value:function(){return["choose-bot-type",this.game.config.botTypeLabels]}},{key:"getMenuItems",value:function(){var t=["bot-types",this.game.config.botTypeLabels];return f.map(function(e){return[].concat(t,[e])})}},{key:"getDefaultItemIndex",value:function(){var e=f.indexOf(this.game.botType);return-1!==e?e:0}},{key:"processSelection",value:function(e){u(l(o.prototype),"processSelection",this).call(this,e),this.game.botType=f[e]}}])&&a(e.prototype,t),n&&a(e,n),o}();n.default=p},{"./game-mode-menu":14}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=(r=e("./game-mode"))&&r.__esModule?r:{default:r},s=e("./i18n");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function f(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){l(r,t,n,o,i,"next",e)}function i(e){l(r,t,n,o,i,"throw",e)}o(void 0)})}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(n);return e=r?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,u["default"]);var e,t,n,r,o,i=h(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).sounds={changeItem:e.jukebox.getSound("changeItem"),selectItem:e.jukebox.getSound("selectItem")},t.music=e.jukebox.getMusic("menu"),t}return e=a,(t=[{key:"handleEnterMode",value:(o=f(regeneratorRuntime.mark(function e(){var t,n,r,o,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.music.play(),t=$(this.game.overlay),n=this.getMenuItems(),this.selectedIndex=this.getDefaultItemIndex(),r=$('<div class="text text-center menu-title" />').appendTo(t),s.localeInit.apply(void 0,[r].concat(c(this.getMenuTitleKeys()))),o=$('<div class="menu-selector" />').addClass("menu-selector-with-".concat(n.length)).appendTo(t),i=0;i<n.length;++i)a=n[i],u=$('<div class="item" />').addClass("item-".concat(i)).toggleClass("selected",this.selectedIndex===i).appendTo(o),"string"==typeof a?u.text(a):Array.isArray(a)?s.localeInit.apply(void 0,[u].concat(c(a))):console.error("Menu item ".concat(i," must be of type (string|string[])[]."));this.$selectorItems=o.children();case 9:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"handleExitMode",value:(r=f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"handleInputs",value:function(e,t){for(var n,r=this,o=0;o<e.length;++o){var i=[e[o],t[o]],a=i[0],i=i[1];if(0!==a.direction&&a.direction*i.direction<=0&&(this.$selectorItems.eq(this.selectedIndex).removeClass("selected"),this.selectedIndex=(n=this.selectedIndex+a.direction,Math.max(0,Math.min(n,r.$selectorItems.length-1))),this.$selectorItems.eq(this.selectedIndex).addClass("selected"),this.sounds.changeItem.play()),a.action&&!i.action){this.sounds.selectItem.play(),this.processSelection(this.selectedIndex),this.triggerEvent("done");break}}}},{key:"getMenuTitleKeys",value:function(){return["menu"]}},{key:"getMenuItems",value:function(){return["One","Two"]}},{key:"getDefaultItemIndex",value:function(){return 0}},{key:"processSelection",value:function(){}}])&&p(e.prototype,t),n&&p(e,n),a}();n.default=m},{"./game-mode":18,"./i18n":20}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./game-mode-menu"))&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(n);return e=r?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,i["default"]);var e,t,n,r=c(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e))._menuItems=Array.from({length:e.game.config.maxPlayers},function(e,t){return String(t+1)}),e}return e=o,(t=[{key:"getMenuTitleKeys",value:function(){return["choose-num-players"]}},{key:"getMenuItems",value:function(){return this._menuItems}},{key:"getDefaultItemIndex",value:function(){return this.game.numPlayers-1}},{key:"processSelection",value:function(e){u(l(o.prototype),"processSelection",this).call(this,e),this.game.numPlayers=e+1}}])&&a(e.prototype,t),n&&a(e,n),o}();n.default=f},{"./game-mode-menu":14}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var y=r(e("events")),o=e("@popperjs/core"),m=r(e("./game-mode")),g=r(e("./terrain")),b=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./waves")),_=r(e("./bot-strategies/base")),w=r(e("./bot-strategies/random")),x=r(e("./bot-strategies/tangent-intersection")),O=r(e("./bot-strategies/gradient-descent")),S=e("./i18n");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function T(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n);return e=r?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==u(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=10,j=300,I=300,e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(h,m["default"]);var e,t,n,r,o,i,a,u,s,c,l,f,p,d=k(h);function h(t){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),e=d.call(this,t);var n=Array(j).fill(null);return e.wavesPoints=function(e){return b.points(n,e,t.draw.width(),E)},e.bot=null,e.sounds={clockTick:e.game.jukebox.getSound("clockTick"),boatMove:e.game.jukebox.getSound("boatMove"),probeDown:e.game.jukebox.getSound("probeDown"),probeUp:e.game.jukebox.getSound("probeUp"),probeHit:e.game.jukebox.getSound("probeHit"),probeMiss:e.game.jukebox.getSound("probeMiss"),revealSeaFloor:e.game.jukebox.getSound("revealSeaFloor"),treasureOpen:e.game.jukebox.getSound("treasureOpen"),gameOverWin:e.game.jukebox.getSound("gameOverWin"),gameOverLose:e.game.jukebox.getSound("gameOverLose"),restart:e.game.jukebox.getSound("selectItem")},e.music=e.game.jukebox.getMusic("play"),e}return e=h,t=[{key:"preLoadAssets",value:(p=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.game.loadSVGSymbol("assets/img/ship.svg");case 2:return this.shipSymbol=e.sent,this.shipSymbol.attr({overflow:"visible"}),e.next=6,this.game.loadSVGSymbol("assets/img/treasure-closed.svg");case 6:return this.treasureClosedSymbol=e.sent,this.treasureClosedSymbol.attr({overflow:"visible"}),e.next=10,this.game.loadSVGSymbol("assets/img/treasure-opened.svg");case 10:this.treasureOpenedSymbol=e.sent,this.treasureOpenedSymbol.attr({overflow:"visible"});case 12:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"handleEnterMode",value:(f=T(regeneratorRuntime.mark(function e(){var l,f,n,t,r,p,d,o,i,a,u,s,c,h,m,v=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.music.play(),r=this.game,l=r.draw,f=r.config,n=r.numPlayers,t=r.botType,this.isGameOver=!1,this.discardInputs=!1,this.remainingTime=1e3*f.maxTime,this.tangents=[],this.$overlay=$('<div class="play" />').appendTo(this.game.overlay),h=$('<div class="game-stats"/>').appendTo(this.$overlay),r=$('<div class="remaining-time"/>').appendTo(h),(0,S.localeInit)($("<span>").appendTo(r),"remaining-time"),f.maxTime===Number.POSITIVE_INFINITY&&r.hide(),h=$('<div class="remaining-probes"/>').appendTo(h),(0,S.localeInit)($("<span>").appendTo(h),"remaining-probes"),this.$remainingTime=$('<span class="counter"/>').appendTo(r),this.$remainingProbes=$("<span />").appendTo(h),f.maxProbes===Number.POSITIVE_INFINITY&&h.hide(),this.$endingSequenceContainer=$("<div />").appendTo(this.$overlay),p=l.group().addClass("play").addClass("draw").translate(0,260),d=function(e){return L(e,String(v.game.config.maxProbes).length," ")},o=function(e,t,n){var r=(e+1)/(t+1),o=p.group();o.addClass(n).transform({translateX:r*l.width()});var i,a=o.use(v.shipSymbol).center(0,18),u=o.group().group(),s=u.line(0,18,0,85),c=u.circle(10).center(0,90),t=$('<span class="counter '.concat(n,'">').concat(f.maxProbes,"</span>")).appendTo(v.$remainingProbes);return a.front(),{id:e,cssClass:n,group:o,boat:a,probe:u,doProbe:function(e){var t=this;this.probing=!0,this.remainingProbes=Math.max(0,this.remainingProbes-1),this.$remainingProbes.text(d(this.remainingProbes)),0===this.remainingProbes&&this.$remainingProbes.addClass("blinking");var n=I+300*e,r=500/I*n,o=c.animate(r,0,"now").cy(n),e=s.animate(r,0,"now").plot(0,18,0,n-5),n=0<this.remainingProbes?90:28,i=o.animate(r,500).cy(n).after(function(){return t.probing=!1});e.animate(r,500).plot(0,18,0,n-5);return{down:new Promise(function(e){return o.after(e)}),up:new Promise(function(e){return i.after(e)})}},x:r,lastX:r,flipX:!1,_probing:!1,_probeEventEmitter:new y.default,set probing(e){var t=this._probing&&!e;this._probing=e,t&&this._probeEventEmitter.emit("probe-off")},get probing(){return this._probing},probingDone:(i=T(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.probing){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new Promise(function(e){return t._probeEventEmitter.addListener("probe-off",e)});case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),remainingProbes:f.maxProbes,$remainingProbes:t}},i=t&&"none"!==t,this.players=Array(n).fill(null).map(function(e,t){return o(t,n+(i?1:0),"player-".concat(t))}),i?(m=function(){switch(t){case"random":return w.default;case"newton":return BotStrategyNewton;case"gradient-descent":return O.default;case"tangent-intersection":return x.default;default:return _.default}}(),a=new m(.1,.9,.03),(u={}).type=t,u.player=o(n,n+1,"player-bot"),s=function(){return a.getNextProbeLocation(v.tangents,u.player,u.player.id,v.players)},u.targetX=s(),u.tangentListener=function(){return u.targetX=s()},this.players.push(u.player),this.events.addListener("new-tangent",u.tangentListener),this.bot=u):this.bot=null,this.water=p.group().attr("id","water").addClass("water"),b.animatedSVGPolyline(this.water,j,100,game.draw.width(),E,2e4),this.groundGroup=p.group(),h=function(){var e={marginWidth:.1,tilt:game.config.maxDepthTilt};return(0,g.default)(20,300,e)},c=game.map||h(),m=c.map(function(e,t){return[l.width()*(t/(c.length-1)),300*e]}).concat([[2*l.width(),0],[2*l.width(),l.height()],[-l.width(),l.height()],[-l.width(),0]]),this.terrainHeights=c,this.treasureLocation=this.locateTreasure(),console.log("Map:",c),console.log("Treasure location:",this.treasureLocation),h=this.groundGroup.group(),h=h.group().addClass("treasure").transform({translateX:this.treasureLocation.x*l.width(),translateY:I+300*this.treasureLocation.y}),this.treasureClosed=h.use(this.treasureClosedSymbol),this.treasureOpened=h.use(this.treasureOpenedSymbol).hide(),this.ground=this.groundGroup.polygon(m).fill("black").addClass("ground").translate(0,I),m=this.groundGroup.group(),this.groundCoverLeft=m.rect(l.width(),l.height()).addClass("ground-cover").move(Math.ceil(l.width()*(this.treasureLocation.x-1)),-150),this.groundCoverRight=m.rect(l.width(),l.height()).addClass("ground-cover").move(Math.floor(l.width()*this.treasureLocation.x),-150),f.showSeaFloor&&m.hide(),this.groundGroup.back(),this.tangentGroup=p.group().translate(0,I),this.discardInputs=!0,this.showGameStartSequence((0,S.localeInit)($("<span>"),"objective"),(0,S.localeInit)($("<span>"),"go"),function(){return v.discardInputs=!1});case 46:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"handleExitMode",value:(l=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==this.bot&&this.events.removeListener("new-tangent",this.bot.tangentListener);case 1:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"handleInputs",value:function(e,s,c){var l=this,t=this.game,n=(t.draw,t.config,t.numPlayers);if(!this.discardInputs){if(!this.isGameOver){t=Math.max(0,this.remainingTime-c);return(this.remainingTime!==t&&(this.remainingTime=t,Math.ceil(this.remainingTime/1e3)!==Math.ceil(t/1e3)&&this.sounds.clockTick.play()),0===this.remainingTime)?(console.log("Time is up - GAME OVER!"),void this.gameOver(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.showLoseSequenceTimeIsUp());case 1:case"end":return e.stop()}},e)})))):0!==this.players.reduce(function(e,t){return e+t.remainingProbes},0)||this.players.reduce(function(e,t){return e||t.probing},!1)?(e=e.slice(0,n),s=s.slice(0,n),null!==this.bot&&(n=(t=h.buildBotInput(this.bot)).input,t=t.lastInput,e.push(n),s.push(t)),void e.forEach(function(e,t){var n,r,o,i,a=M(e,s[t]),u=l.players[t];u.probing||l.isGameOver||(u.lastX=u.x,u.x+=c*e.direction*2e-4,u.x=Math.min(Math.max(.1,u.x),.9),u.flipX=0===e.direction?u.flipX:-1===e.direction,a&&0<u.remainingProbes&&(n=l.terrainHeight(u.x),a=(e=u.doProbe(n)).down,r=e.up,a.then(function(){return l.addTangent(u)}),o=Math.abs(u.x-l.treasureLocation.x)<=.015,a.then(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&!l.isGameOver)return console.log("Treasure found - GAME OVER!"),e.next=4,l.gameOver(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.showWinSequence(u));case 1:case"end":return e.stop()}},e)})));e.next=4;break;case 4:case"end":return e.stop()}},e)}))),i=l.sounds.probeDown.play(),a.then(function(){i.stop(),(o?l.sounds.probeHit:l.sounds.probeMiss).play();var e=l.sounds.probeUp.play();r.then(function(){return e.stop()})}),console.log("Player ".concat(t," is probing at:"),{x:u.x,y:n})))})):(console.log("No probes left - GAME OVER!"),void this.gameOver(T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.showLoseSequenceNoProbesLeft());case 1:case"end":return e.stop()}},e)}))))}e=-1!==e.findIndex(function(e,t){return M(e,s[t])});this.isGameOver&&e&&(this.sounds.restart.play(),this.discardInputs=!0,this.triggerEvent("done"))}}},{key:"draw",value:function(e,t){var n=this,r=this.game,i=r.draw,r=(r.numPlayers,L(Math.ceil(this.remainingTime/1e3),String(n.game.config.maxTime).length," "));r!==this.$remainingTime.text()&&this.$remainingTime.text(r),0===this.remainingTime&&this.$remainingTime.addClass("blinking");var a=1e3*i.node.getCurrentTime();this.players.forEach(function(e,t){var n=e.x,r=E*b.height(n,a/2e4),o=E*b.slope(n,a/2e4),o=45*Math.atan2(o,i.width())/Math.PI;e.boat.node.style.transform="rotate(".concat(o,"deg) scale(").concat(e.flipX?-1:1,",1)"),e.group.node.style.transform="translate(".concat(n*i.width(),"px,").concat(r,"px)")})}},{key:"terrainHeight",value:function(e){return this.terrainHeightExt(e).value}},{key:"terrainHeightExt",value:function(e){var t=(this.terrainHeights.length-1)*e,n=Math.floor(t),r=n===this.terrainHeights.length-1?n-1:n,o=r+1,n=this.terrainHeights[r],o=this.terrainHeights[o];return{x:e,value:n+(t-r)*(o-n),slope:(o-n)*(this.terrainHeights.length-1)}}},{key:"locateTreasure",value:function(){var e,t=Math.floor(.1*this.terrainHeights.length)+1,n=this.terrainHeights.slice(t,this.terrainHeights.length-t),n=t+(e=n,[].reduce.call(e,function(e,t,n,r){return t>r[e]?n:e},0));return{x:n/(this.terrainHeights.length-1),y:this.terrainHeights[n]}}},{key:"addTangent",value:function(e){this.tangentGroup.find(e.cssClass).each(function(){var e,t,t=(e=this.opacity(),(t=.25)+(e-t)*.9);this.animate(500).opacity(t)});var t=this.game.draw.width(),n=this.terrainHeightExt(e.x),r=n.x,o=n.value,i=n.slope,i=180*Math.atan2(300*i,t)/Math.PI;this.tangentGroup.line(.02*-t/2,0,.02*t/2,0).addClass(e.cssClass).transform({translateX:t*r,translateY:300*o,rotate:i}),this.tangents.push(n),this.tangents.sort(function(e,t){return e.x-t.x}),this.events.emit("new-tangent",n,this.tangents.indexOf(n),this.tangents)}},{key:"gameOver",value:(c=T(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isGameOver=!0,this.discardInputs=!0,n=this.uncoverGround(),e.next=5,Promise.all(this.players.map(function(e){return e.probingDone()}));case 5:return e.next=7,t();case 7:return this.discardInputs=!1,e.next=10,n;case 10:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"uncoverGround",value:(s=T(regeneratorRuntime.mark(function e(){var n,t,r,o,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<a.length&&void 0!==a[0]?a[0]:2e3,t=this.sounds.revealSeaFloor.play(),r=this.game.draw,0!==n){e.next=8;break}this.groundCoverLeft.dx(-r.width()),this.groundCoverRight.dx(r.width()),e.next=14;break;case 8:return o=function(e,t){return e.animate(n).dx(t)},i=function(t,n){return new Promise(function(e){return o(t,n).after(e)})},(i=Promise.all([i(this.groundCoverLeft,-r.width()),i(this.groundCoverRight,r.width())])).finally(function(){return t.stop()}),e.abrupt("return",i);case 14:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"showGameStartSequence",value:(u=T(regeneratorRuntime.mark(function e(t,n){var r,o,i,a,u,s,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<c.length&&void 0!==c[2]?c[2]:Function.prototype,o=3<c.length&&void 0!==c[3]?c[3]:[],s=this.game.draw,i=function(t){return new Promise(function(e){return setTimeout(e,t)})},u=$('<div class="line">').append(t),a=$('<div class="line">').append(n).css("visibility","hidden"),u=$('<div class="announcement-sequences-text" />').addClass(o).append([u,$("<br>"),a]),s=56e3/s.height(),s=$('<div class="announcement-sequences-text-anchor" />').css({left:"50%",top:"".concat(s,"%"),width:"0px",height:"0px"}),e.next=11,i(500);case 11:return this.$endingSequenceContainer.empty().append([s,u]),R(s.get(0),u.get(0),{placement:"top"}),e.next=15,i(2e3);case 15:return a.css("visibility","visible"),r(),e.next=19,i(1e3);case 19:this.$endingSequenceContainer.empty();case 20:case"end":return e.stop()}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"showWinSequence",value:(a=T(regeneratorRuntime.mark(function e(t){var n,r,o,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$("<span>").append((0,S.localeInit)($("<span>"),"win-announcement-begin"),$("<span>").text(t.id+1),(0,S.localeInit)($("<span>"),"win-announcement-end")),o=function(e){return Math.floor(Math.random()*(e.length-1))},r=(0,S.localeInit)($("<span>"),"treasures",o(IMAGINARY.i18n.t("treasures"))),o=function(){i.treasureOpened.show(),i.treasureClosed.hide(),i.sounds.treasureOpen.play()},e.next=6,this.showGameOverSequence(n,function(){return i.sounds.gameOverWin.play()},r,o,[t.cssClass]);case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"showLoseSequenceTimeIsUp",value:(i=T(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showGameOverSequence((0,S.localeInit)($("<span>"),"time-is-up"),function(){return t.sounds.gameOverLose.play()},(0,S.localeInit)($("<span>"),"game-over"));case 2:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"showLoseSequenceNoProbesLeft",value:(o=T(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showGameOverSequence((0,S.localeInit)($("<span>"),"no-probes-left"),function(){return t.sounds.gameOverLose.play()},(0,S.localeInit)($("<span>"),"game-over"));case 2:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"showGameOverSequence",value:(r=T(regeneratorRuntime.mark(function e(t,n,r){var o,i,a,u,s,c,l,f=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=3<f.length&&void 0!==f[3]?f[3]:Function.prototype,s=4<f.length&&void 0!==f[4]?f[4]:[],l=this.game.draw,i=function(t){return new Promise(function(e){return setTimeout(e,t)})},c=$('<div class="line">').append(t),a=$('<div class="line">').append(r).css("visibility","hidden"),u=$('<div class="blinking">').css("visibility","hidden"),(0,S.localeInit)(u,"press-to-restart"),s=$('<div class="announcement-sequences-text" />').addClass(s).append([c,a,$("<br>"),u]),c=100*this.treasureLocation.x,l=56e3/l.height(),l=$('<div class="announcement-sequences-text-anchor" />').css({left:"".concat(c,"%"),top:"".concat(l,"%"),width:"0px",height:"0px"}),e.next=14,i(0);case 14:return this.$endingSequenceContainer.empty().append([l,s]),R(l.get(0),s.get(0),{placement:"top"}),n(),e.next=19,i(1e3);case 19:return a.css("visibility","visible"),o(),e.next=23,i(1e3);case 23:u.css("visibility","visible");case 24:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})}],n=[{key:"buildBotInput",value:function(e){var t={direction:0,action:!1},n=e.player,r=e.targetX,o=n.x,i=n.lastX,e=v(o<i?[o,i]:[i,o],2),i=e[0],e=e[1];return i<=r&&r<=e?(n.lastX=o,n.x=r,t.action=!0):t.direction=Math.sign(r-n.x),{input:t,lastInput:{direction:0,action:!1}}}}],t&&A(e.prototype,t),n&&A(e,n),h}();function M(e,t){return e.action&&!t.action}function L(e,t,n){return String(e).padStart(t,n)}function R(e,t,n){var r=(0,o.createPopper)(e,t,n);return new MutationObserver(function(){return r.update()}).observe(t,{subtree:!0,childList:!0,characterData:!0}),r}n.default=e},{"./bot-strategies/base":4,"./bot-strategies/gradient-descent":5,"./bot-strategies/random":6,"./bot-strategies/tangent-intersection":7,"./game-mode":18,"./i18n":20,"./terrain":23,"./waves":24,"@popperjs/core":26,events:32}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("./i18n"),c=r(e("./game-mode")),l=r(e("./wavy-animation"));e("./audio");function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function p(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){f(r,t,n,o,i,"next",e)}function i(e){f(r,t,n,o,i,"throw",e)}o(void 0)})}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=i(n);return e=r?(e=i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==o(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,c["default"]);var e,t,n,r,o,i,a=m(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).sounds={title:e.jukebox.getSound("gameLogoAppears"),select:e.jukebox.getSound("selectItem")},t.music=e.jukebox.getMusic("title"),t}return e=u,(t=[{key:"preLoadAssets",value:(i=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.game.loadSVGSymbol("assets/img/descent-logo.svg");case 2:this.logoSprite=e.sent,this.poly=this.logoSprite.findOne("#descent");case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"handleEnterMode",value:(o=p(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.music.play(),n=this.game.draw,(t=document.createElement("div")).classList.add("title-press-to-start"),(0,s.localeInit)(t,"press-to-start"),this.game.overlay.append(t),t="#34c6ff",n=n.use(this.logoSprite).size(1200,400).stroke({color:"#00368a",width:2}).fill("transparent").center(960,432),this.logoSprite.findOne("#gradient").stroke("none").fill(t).opacity(0).animate({duration:7e3}).opacity(1),n.animate({duration:5e3}).stroke({color:t}),this.wavyStep=(0,l.default)(this.logoSprite,{duration:3500}),this.animCounter=0,this.sounds.title.play();case 15:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"handleExitMode",value:(r=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.wavyStep(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"handleInputs",value:function(e,n){e.find(function(e,t){return e.action&&!n[t].action})&&(this.sounds.select.play(),this.triggerEvent("done"))}},{key:"draw",value:function(e,t){this.wavyStep(e,t)}}])&&d(e.prototype,t),n&&d(e,n),u}();n.default=e},{"./audio":3,"./game-mode":18,"./i18n":20,"./wavy-animation":25}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=(r=e("events"))&&r.__esModule?r:{default:r};function s(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function c(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.events=new u.default}var e,n,r,o,i,a;return e=t,(n=[{key:"preLoadAssets",value:(a=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{key:"handleEnterMode",value:(i=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"handleExitMode",value:(o=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)})},{key:"handleInputs",value:function(){}},{key:"handleLanguageChange",value:function(){}},{key:"draw",value:function(){}},{key:"triggerEvent",value:function(e){this.events.emit(e)}}])&&l(e.prototype,n),r&&l(e,r),t}();n.default=o},{events:32}],19:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("@wessberg/pointer-events");r(e("./i18n"));var c=r(e("./game-mode-play")),l=r(e("./game-mode-title")),f=r(e("./game-mode-numplayers")),p=r(e("./controls/gamepad")),d=r(e("./controls/screen")),h=r(e("./controls/keyboard")),m=r(e("./audio-toggle")),v=r(e("./full-screen-toggle")),y=r(e("./game-mode-bottype")),g=r(e("./language-cycle-button")),b=r(e("./audio")),_=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./audio-resources"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function w(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function O(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.container=e,this.config=t,this.inputs=this.createInputs(),this.inputsLast=this.createInputs(),this.animationFrameRequestId=0,this.gameLoop=null,this.isPaused=!1,this.modes={},this.currentMode=null,this.controls={},this.debugControlsPane=null,this.botType=this.config.botType,this.numPlayers=this.config.maxPlayers,this.jukebox=b.default,this.map=t.map}var e,t,r,o,i,a,u,s;return e=n,(t=[{key:"init",value:(s=O(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.createElement("div")).classList.add("min-aspect-ratio"),this.container.append(n),(t=document.createElement("div")).classList.add("game-view"),n.append(t),this.svgDoc=SVG().addTo(t),this.svgDoc.viewbox(0,0,1920,864).attr("preserveAspectRatio","xMinYMin meet"),this.draw=this.svgDoc.nested().size(1920,864),this.overlay=document.createElement("div"),this.overlay.classList.add("overlay"),n.append(this.overlay),this.config.useScreenControls&&(this.controls.screen=new d.default(this.config.maxPlayers),n.appendChild(this.controls.screen.element)),this.config.useGamepads&&(this.controls.gamepad=new p.default(this.config.maxPlayers)),this.languageButton=new g.default(this.container,this.config.languages),n.appendChild(this.languageButton.element),this.config.languageButton||(this.languageButton.element.style.visibility="hidden"),this.config.audioButton&&(this.audioToggle=new m.default,n.appendChild(this.audioToggle.element)),b.default.mute(this.config.muteAudio),this.config.fullScreenButton&&(this.fullScreenToggle=new v.default,n.appendChild(this.fullScreenToggle.element)),this.config.useKeyboardControls&&(this.controls.keyboard=new h.default(this.config.maxPlayers)),this.config.debugControls&&(this.debugControlsPane=document.createElement("div"),this.debugControlsPane.classList.add("debug-pane"),this.debugControlsPane.classList.add("debug-pane-controls"),n.appendChild(this.debugControlsPane)),e.prev=23,t=Object.entries(_.sounds).map(function(e){var t=x(e,2),e=t[0],t=t[1];return r.jukebox.registerSound(e,t)}),n=Object.entries(_.musics).map(function(e){var t=x(e,2),e=t[0],t=t[1];return r.jukebox.registerMusic(e,t)}),e.next=28,Promise.all([].concat(w(t),w(n)));case 28:e.next=34;break;case 30:throw e.prev=30,e.t0=e.catch(23),console.err("Unable to load game audio.",e.t0),e.t0;case 34:return e.next=36,this.registerMode("title",new l.default(this));case 36:return e.next=38,this.registerMode("bottype",new y.default(this));case 38:return e.next=40,this.registerMode("numplayers",new f.default(this));case 40:return e.next=42,this.registerMode("play",new c.default(this));case 42:if(this.config.continuousGame)return this.transition("play","done","play"),e.next=46,this.setMode("play");e.next=48;break;case 46:e.next=58;break;case 48:return t=null===this.config.botType,n=1<this.config.maxPlayers,t=t?"bottype":"play",n=n?"numplayers":t,this.transition("title","done",n),this.transition("numplayers","done",t),this.transition("bottype","done","play"),this.transition("play","done","title"),e.next=58,this.setMode("title");case 58:case"end":return e.stop()}},e,this,[[23,30]])})),function(){return s.apply(this,arguments)})},{key:"loadSVGSymbol",value:(u=O(regeneratorRuntime.mark(function e(t){var n,r,o,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(1<i.length&&void 0!==i[1])||i[1],e.next=3,fetch(t);case 3:if((r=e.sent).status<200||300<=r.status)throw new Error("Server returned status ".concat(r.status," (").concat(r.statusText,") loading ").concat(t,"."));e.next=6;break;case 6:return e.t0=this.svgDoc.symbol(),e.next=9,r.text();case 9:return e.t1=e.sent,o=e.t0.svg.call(e.t0,e.t1),n&&o.find("style").forEach(function(e){return e.remove()}),e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"initInputs",value:function(){this.inputs=this.createInputs()}},{key:"createInputs",value:function(){return Array(this.config.maxPlayers).fill(null).map(function(){return{direction:0,action:!1,language:!1}})}},{key:"readInputs",value:function(){this.inputsLast=this.inputs;function n(e,t){return{direction:t.right?1:t.left?-1:e.direction,action:t.action||e.action,language:t.language||e.language}}var r=Object.values(this.controls).map(function(e){return e.getStates()});this.inputs=this.createInputs().map(function(e,t){return r.map(function(e){return e[t]}).reduce(n,e)}),this.debugControlsPane&&(this.debugControlsPane.textContent=this.inputs.map(function(e,t){return"C".concat(t,": d=").concat(e.direction," a=").concat(e.action?"T":"F")}).join("    "))}},{key:"handleGlobalInputs",value:function(){var r=this;this.inputsLast.reduce(function(e,t,n){return e||!1===t.language&&!0===r.inputs[n].language},!1)&&this.languageButton.handleLanguageChange().then()}},{key:"run",value:function(){var n,r,o=this;window.cancelAnimationFrame(this.animationFrameRequestId),this.gameLoop||(r=n=0,this.gameLoop=function(e){var t;o.isPaused||(o.readInputs(),o.handleGlobalInputs(),t=(e-=r+=Math.max(0,e-r-n-125))-n,o.currentMode.handleInputs(o.inputs,o.inputsLast,t,e),o.currentMode.draw(t,e),n=e,o.animationFrameRequestId=window.requestAnimationFrame(o.gameLoop))}),this.animationFrameRequestId=window.requestAnimationFrame(this.gameLoop)}},{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused&&(this.isPaused=!1,this.run())}},{key:"registerMode",value:(a=O(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.modes[t]=n,e.next=3,n.preLoadAssets();case 3:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"setMode",value:(i=O(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pause(),this.currentMode)return e.next=4,this.currentMode.handleExitMode();e.next=4;break;case 4:if(void 0===this.modes[t])throw new Error("Can't change to unknown mode ".concat(t));e.next=6;break;case 6:return this.currentMode=this.modes[t],this.draw.clear(),this.overlay.innerHTML="",e.next=11,this.currentMode.handleEnterMode();case 11:this.resume();case 12:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"transition",value:function(e,t,n,r){var o=this,i=2<arguments.length&&void 0!==n?n:null,a=3<arguments.length&&void 0!==r?r:null;if(void 0===this.modes[e])throw new Error("Can't define transition from unknown game mode '".concat(e,"'"));if(i&&void 0===this.modes[i])throw new Error("Can't define transition to unknown game mode '".concat(i,"'"));this.modes[e].events.on(t,function(){if(o.currentMode!==o.modes[e])throw new Error("Mode ".concat(e," triggered the event ").concat(t," while not active. Something was not cleaned up?"));null!==i&&o.setMode(i),a&&"function"==typeof a&&a()})}},{key:"setMap",value:function(e){this.map=!Array.isArray(e)||e.length<2?null:e}},{key:"showSeaFloor",value:(o=O(regeneratorRuntime.mark(function e(){var t,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(0<n.length&&void 0!==n[0])||n[0],!this.currentMode||"function"!=typeof this.currentMode.uncoverGround){e.next=9;break}if(t)return e.next=5,this.currentMode.uncoverGround();e.next=7;break;case 5:e.next=9;break;case 7:return e.next=9,this.currentMode.uncoverGround(0);case 9:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})}])&&S(e.prototype,t),r&&S(e,r),n}();n.default=e},{"./audio":3,"./audio-resources":1,"./audio-toggle":2,"./controls/gamepad":9,"./controls/keyboard":10,"./controls/screen":11,"./full-screen-toggle":12,"./game-mode-bottype":13,"./game-mode-numplayers":15,"./game-mode-play":16,"./game-mode-title":17,"./i18n":20,"./language-cycle-button":21,"@wessberg/pointer-events":27}],20:[function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.localize=n.default=s,n.localeInit=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.map(encodeURIComponent);return $(e).attr(u,o.join(",")),s(e),e},n.localizeFlat=c,n.I18N_KEY_ATTRIBUTE=n.I18N_KEY_DATA_ATTRIBUTE=void 0;var a="i18n-key";n.I18N_KEY_DATA_ATTRIBUTE=a;var u="data-".concat(a);n.I18N_KEY_ATTRIBUTE=u;var o="*[".concat(u,"]");function s(e){return c(e),c($(e).find(o)),e}function c(e){return $(e).filter(o).each(function(){var e,t,n,r=$(this),o=r.data(a).split(",").map(decodeURIComponent);0<o.length&&(e={},t=o[0],n=IMAGINARY.i18n.t(o[0]),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e=e,o=l.apply(void 0,[e].concat(i(o))),r.text(o))}),e}function l(e,t){for(var t=e[t],n=arguments.length,r=new Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return 0===r.length?t:l.apply(void 0,[t].concat(r))}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./i18n"))&&r.__esModule?r:{default:r};function s(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function r(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.elementToLocalize=e,this.languageCodes=t,this.languageButton=document.createElement("div"),this.languageButton.classList.add("language-button"),this.languageIcon=document.createElement("i"),this.languageIcon.classList.add("fas","fa-sm","fa-language"),this.languageButton.appendChild(this.languageIcon),this.languageButton.onpointerup=function(){return n.handleLanguageChange()},this.element=this.languageButton}var e,t,n,u,o;return e=r,(t=[{key:"handleLanguageChange",value:(u=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.languageCodes.indexOf(IMAGINARY.i18n.getLang()),t=(t+1)%this.languageCodes.length,t=this.languageCodes[t],e.next=5,IMAGINARY.i18n.setLang(t);case 5:(0,i.default)(this.elementToLocalize),console.log("Language switched: ".concat(t));case 7:case"end":return e.stop()}},e,this)}),o=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})},function(){return o.apply(this,arguments)})}])&&a(e.prototype,t),n&&a(e,n),r}();n.default=o},{"./i18n":20}],22:[function(e,t,n){"use strict";var r,o,a=(r=e("./game"))&&r.__esModule?r:{default:r};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function c(u){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=u.apply(e,a);function o(e){s(r,t,n,o,i,"next",e)}function i(e){s(r,t,n,o,i,"throw",e)}o(void 0)})}}function l(){return(l=c(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{cache:"no-store"});case 2:if(200<=(n=e.sent).status&&n.status<300)return e.prev=4,e.next=7,n.json();e.next=13;break;case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),new Error("Error parsing JSON file: ".concat(e.t0.message));case 13:throw new Error("Server returned status ".concat(n.status," (").concat(n.statusText,") loading JSON file."));case 14:case"end":return e.stop()}},e,null,[[4,10]])}))).apply(this,arguments)}function f(){return(f=c(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={defaultLanguage:"en",languages:void 0,useGamepads:!0,useScreenControls:!0,useKeyboardControls:!0,botType:null,botTypeLabels:"difficulty",maxPlayers:2,maxTime:Number.POSITIVE_INFINITY,maxProbes:Number.POSITIVE_INFINITY,continuousGame:!1,showSeaFloor:!1,maxDepthTilt:4,fullScreenButton:!0,languageButton:!0,audioButton:!0,muteAudio:!1,debugControls:!1,map:null},e.next=3,function(){return l.apply(this,arguments)}(new URL("tr.json",window.location.href));case 3:return n=e.sent,t.languages=Object.keys(n).sort(),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{cache:"no-store"});case 2:if(200<=(n=e.sent).status&&n.status<300)return e.prev=4,e.next=7,n.json();e.next=17;break;case 7:return r=e.sent,o=function(e){return(e=String(e).toLowerCase()).charAt(0).toUpperCase()+e.slice(1)},Number(o(r.maxTime))===Number.POSITIVE_INFINITY&&(r.maxTime=Number.POSITIVE_INFINITY),Number(o(r.maxProbes))===Number.POSITIVE_INFINITY&&(r.maxProbes=Number.POSITIVE_INFINITY),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(4),new Error("Error parsing config file: ".concat(e.t0.message));case 17:throw new Error("Server returned status ".concat(n.status," (").concat(n.statusText,") loading config file."));case 18:case"end":return e.stop()}},e,null,[[4,14]])}))).apply(this,arguments)}o=c(regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new URL("./config.json",window.location.href),t=function(){return f.apply(this,arguments)}(),n=function(){if((t=new URLSearchParams(window.location.search)).has("config")){var e=t.get("config"),t=/^[A-Za-z0-9\-_.]+$/;if(t.test(e))return new URL(e,window.location.href);throw new Error("Custom config path ".concat(e," must match ").concat(t.toString(),"."))}return null}(),r=function(){return p.apply(this,arguments)}((null!=n?n:r).href),e.next=8,Promise.all([t,r]);case 8:return i=e.sent,o=u(i,2),r=o[0],i=o[1],o=Object.assign({},r,i),console.log("Default configuration:",r),console.log("Loaded configuration:",i),console.log("Merged configuration:",o),e.next=18,IMAGINARY.i18n.init({queryStringVariable:"lang",translationsDirectory:"tr",defaultLanguage:o.defaultLanguage||"en"});case 18:return i=new a.default(document.querySelector(".main"),o),window.game=i,e.next=22,i.init();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error(e.t0);case 27:case"end":return e.stop()}},e,null,[[0,24]])})),function(){o.apply(this,arguments)}()},{"./game":19}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return n=Object.assign({},i,n),function(e,t){for(var n=e[0][0],r=e[e.length-1][0]-n,o=Array(t),i=0,a=0;a<o.length-1;++a){for(;a>=(t-1)*(e[i][0]-n)/r;)++i;var u=(n+a/(t-1)*r-e[i-1][0])/(e[i][0]-e[i-1][0]);o[a]=e[i-1][1]+(e[i][1]-e[i-1][1])*u}return o[o.length-1]=e[e.length-1][1],o}(function e(n,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(0===t)return n;var o=n.length;var i=n.map(function(e,t){return[[.75*e[0]+.25*n[(t+1)%o][0],.75*e[1]+.25*n[(t+1)%o][1]],[.25*e[0]+.75*n[(t+1)%o][0],.25*e[1]+.75*n[(t+1)%o][1]]]}).flat();r&&(--i.length,i[0]=n[0],i[i.length-1]=n[n.length-1]);return e(i,t-1,r)}(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.2,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.25,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4,i=new Float32Array(e),a=Math.floor(t*e),u=Math.floor((1-t)*(e-1));(0,s.default)(a+1<u),(0,s.default)(0<=n&&n<1);t=l(a+1,u),o=1-Math.pow(Math.random(),o),o=n+Math.max(Number.EPSILON,o*(1-n)),n=[[0,Math.random()*n],[a,n],[t,o],[u,n],[e-1,Math.random()*n]];0<e&&(n.forEach(function(e){var t=c(e,2),e=t[0],t=t[1];return i[e]=t}),n.reduce(function(e,t){var n=c(e,2),r=n[0],e=n[1],n=c(t,2),t=n[0],n=n[1];return function e(t,n,r){{var o,i;0<t.length&&(i=f(t.length,n,r),o=i.index,i=i.height,t[o]=i,e(t.subarray(0,o),n,i),e(t.subarray(o+1,t.length),i,r))}return t}(i.subarray(r+1,t),e,n),[t,n]}));return r=Math.max(0,Math.min(r,1)),new Array(i.length).fill(null).map(function(e,t){return[(t+r*(Math.random()-.5))/(i.length-1),i[t]]})}(e,n.marginWidth,n.marginHeight,n.jitter,n.tilt),n.smoothing),t).map(function(e){return function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}(e,5)})};var r,s=(r=e("assert"))&&r.__esModule?r:{default:r};function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){(0,s.default)(Number.isInteger(e)&&0<=e),(0,s.default)(Number.isInteger(t)&&0<=t),(0,s.default)(e<t);var n=e+(t-e)*Math.random();return Math.max(e,Math.min(Math.floor(n),t-1))}function f(e,t,n){return{index:l(0,e),height:Math.max(t,n)*Math.random()}}var i={marginWidth:.1,marginHeight:.1,jitter:.25,tilt:4,smoothing:6}},{assert:28}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.height=u,n.slope=function(e,t){return t=t*r%r,(100*Math.cos(100*e+t)+50*Math.cos(50*e-t)+30*Math.cos(30*e+2*t)+10*Math.cos(10*e-3*t))/4},n.heights=function(n,r){return n.forEach(function(e,t){return n[t]=u(t/(n.length-1),r)}),n},n.points=s,n.animatedSVGPolyline=function(e,t,n,r,o,i){var a=Array(t).fill(null),t=Array(n).fill(null).map(function(e,t){return Array.from(s(a,t/(n-1),r,o))}),u=e.polyline(t[0]),t=t.map(function(e){return u.plot(e).attr("points")}).join(";\n").replace(/;[[:space:]]*;]/g,";");return u.element("animate").attr({attributeName:"points",dur:"".concat(i,"ms"),repeatCount:"indefinite",values:t}),u};var r=12*Math.PI;function u(e,t){return t=t*r%r,(Math.sin(100*e+t)+Math.sin(50*e-+t)+Math.sin(30*e+2*t)+Math.sin(10*e-3*t))/4}function s(r,o){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;return r.forEach(function(e,t){var n=t/(r.length-1);r[t]=[i*n,a*u(n,o)]}),r}},{}],25:[function(e,t,n){"use strict";function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({},{xAmplitude:50,duration:5e3,cycles:3},t),o=e.find("polygon"),i=o.map(function(e){return e.plot()}),a=Math.max.apply(Math,function(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.flat().map(function(e){return s(e,2)[1]}))),u=0;return function(e,t){var n;u>r.duration||(u+=e,n=Math.min(u,r.duration)/r.duration,o.forEach(function(e,t){e.plot(i[t].map(function(e){var t=s(e,2),e=t[0],t=t[1];return[e+Math.sin((t/a+n*r.cycles)*Math.PI*2)*r.xAmplitude*(1-Math.pow(n,2)),t]}))}))}}},{}],26:[function(e,t,we){(function(_e){(function(){"use strict";function p(e){e=e.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function h(e){if("[object Window]"===e.toString())return e;e=e.ownerDocument;return e&&e.defaultView||window}function l(e){e=h(e);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function m(e){return e instanceof h(e).Element||e instanceof Element}function f(e){return e instanceof h(e).HTMLElement||e instanceof HTMLElement}function u(e){return e?(e.nodeName||"").toLowerCase():null}function v(e){return((m(e)?e.ownerDocument:e.document)||window.document).documentElement}function d(e){return p(v(e)).left+l(e).scrollLeft}function y(e){return h(e).getComputedStyle(e)}function s(e){var t=y(e),n=t.overflow,e=t.overflowX,t=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+t+e)}function g(e,t,n){void 0===n&&(n=!1);var r=v(t),o=p(e),i=f(t),a={scrollLeft:0,scrollTop:0},e={x:0,y:0};return!i&&(i||n)||("body"===u(t)&&!s(r)||(a=(i=t)!==h(i)&&f(i)?{scrollLeft:(n=i).scrollLeft,scrollTop:n.scrollTop}:l(i)),f(t)?((e=p(t)).x+=t.clientLeft,e.y+=t.clientTop):r&&(e.x=d(r))),{x:o.left+a.scrollLeft-e.x,y:o.top+a.scrollTop-e.y,width:o.width,height:o.height}}function O(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function a(e){return"html"===u(e)?e:e.assignedSlot||e.parentNode||e.host||v(e)}function b(e,t){void 0===t&&(t=[]);var n=function e(t){return 0<=["html","body","#document"].indexOf(u(t))?t.ownerDocument.body:f(t)&&s(t)?t:e(a(t))}(e),r="body"===u(n),e=h(n),n=r?[e].concat(e.visualViewport||[],s(n)?n:[]):n,t=t.concat(n);return r?t:t.concat(b(a(n)))}function r(e){if(!f(e)||"fixed"===y(e).position)return null;var t=e.offsetParent;if(t){e=v(t);if("body"===u(t)&&"static"===y(t).position&&"static"!==y(e).position)return e}return t}function S(e){for(var t=h(e),n=r(e);n&&0<=["table","td","th"].indexOf(u(n))&&"static"===y(n).position;)n=r(n);return(!n||"body"!==u(n)||"static"!==y(n).position)&&(n||function(e){for(var t=a(e);f(t)&&["html","body"].indexOf(u(t))<0;){var n=y(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e))||t}Object.defineProperty(we,"__esModule",{value:!0});var P="top",k="bottom",E="right",j="left",I="auto",M=[P,k,E,j],L="start",c="end",_="clippingParents",w="viewport",x="popper",T="reference",R=M.reduce(function(e,t){return e.concat([t+"-"+L,t+"-"+c])},[]),C=[].concat(M,[I]).reduce(function(e,t){return e.concat([t,t+"-"+L,t+"-"+c])},[]),A=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function D(e){var n=new Map,r=new Set,o=[];return e.forEach(function(e){n.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||!function t(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){r.has(e)||(e=n.get(e))&&t(e)}),o.push(e)}(e)}),o}function B(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce(function(e,t){return e.replace(/%s/,t)},e)}var N='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',H='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',F=["name","enabled","phase","fn","effect","requires","options"];function X(e){return e.split("-")[0]}function Y(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&((n=n)instanceof h(n).ShadowRoot||n instanceof ShadowRoot)){var r=t;do{if(r&&e.isSameNode(r))return!0}while(r=r.parentNode||r.host)}return!1}function q(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function G(e,t){return t===w?q((i=h(o=e),a=v(o),u=i.visualViewport,s=a.clientWidth,c=a.clientHeight,a=i=0,u&&(s=u.width,c=u.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=u.offsetLeft,a=u.offsetTop)),{width:s,height:c,x:i+d(o),y:a})):f(t)?((r=p(n=t)).top=r.top+n.clientTop,r.left=r.left+n.clientLeft,r.bottom=r.top+n.clientHeight,r.right=r.left+n.clientWidth,r.width=n.clientWidth,r.height=n.clientHeight,r.x=r.left,r.y=r.top,r):q((o=v(e),a=v(o),t=l(o),n=o.ownerDocument.body,r=Math.max(a.scrollWidth,a.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),e=Math.max(a.scrollHeight,a.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-t.scrollLeft+d(o),t=-t.scrollTop,"rtl"===y(n||a).direction&&(o+=Math.max(a.clientWidth,n?n.clientWidth:0)-r),{width:r,height:e,x:o,y:t}));var n,r,o,i,a,u,s,c}function $(n,e,t){var r,o,i,e="clippingParents"===e?(o=b(a(r=n)),m(i=0<=["absolute","fixed"].indexOf(y(r).position)&&f(r)?S(r):r)?o.filter(function(e){return m(e)&&Y(e,i)&&"body"!==u(e)}):[]):[].concat(e),e=[].concat(e,[t]),t=e[0],t=e.reduce(function(e,t){t=G(n,t);return e.top=Math.max(t.top,e.top),e.right=Math.min(t.right,e.right),e.bottom=Math.min(t.bottom,e.bottom),e.left=Math.max(t.left,e.left),e},G(n,t));return t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}function V(e){return e.split("-")[1]}function U(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function W(e){var t,n=e.reference,r=e.element,o=e.placement,e=o?X(o):null,o=o?V(o):null,i=n.x+n.width/2-r.width/2,a=n.y+n.height/2-r.height/2;switch(e){case P:t={x:i,y:n.y-r.height};break;case k:t={x:i,y:n.y+n.height};break;case E:t={x:n.x+n.width,y:a};break;case j:t={x:n.x-r.width,y:a};break;default:t={x:n.x,y:n.y}}var u=e?U(e):null;if(null!=u){var s="y"===u?"height":"width";switch(o){case L:t[u]=Math.floor(t[u])-Math.floor(n[s]/2-r[s]/2);break;case c:t[u]=Math.floor(t[u])+Math.ceil(n[s]/2-r[s]/2)}}return t}function z(){return{top:0,right:0,bottom:0,left:0}}function K(e){return Object.assign(Object.assign({},z()),e)}function Z(n,e){return e.reduce(function(e,t){return e[t]=n,e},{})}function J(e,t){void 0===t&&(t={});var r,n=t.placement,o=void 0===n?e.placement:n,i=t.boundary,a=void 0===i?_:i,u=t.rootBoundary,s=void 0===u?w:u,c=t.elementContext,l=void 0===c?x:c,n=t.altBoundary,i=void 0!==n&&n,u=t.padding,c=void 0===u?0:u,n=K("number"!=typeof c?c:Z(c,M)),t=l===x?T:x,u=e.elements.reference,c=e.rects.popper,t=e.elements[i?t:l],a=$(m(t)?t:t.contextElement||v(e.elements.popper),a,s),s=p(u),u=W({reference:s,element:c,strategy:"absolute",placement:o}),u=q(Object.assign(Object.assign({},c),u)),s=l===x?u:s,f={top:a.top-s.top+n.top,bottom:s.bottom-a.bottom+n.bottom,left:a.left-s.left+n.left,right:s.right-a.right+n.right},e=e.modifiersData.offset;return l===x&&e&&(r=e[o],Object.keys(f).forEach(function(e){var t=0<=[E,k].indexOf(e)?1:-1,n=0<=[P,k].indexOf(e)?"y":"x";f[e]+=r[n]*t})),f}var Q="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",o={placement:"bottom",modifiers:[],strategy:"absolute"};function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function e(e){void 0===e&&(e={});var t=e.defaultModifiers,d=void 0===t?[]:t,e=e.defaultOptions,h=void 0===e?o:e;return function(a,u,t){void 0===t&&(t=h);var n,r,s={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},o),h),modifiersData:{},elements:{reference:a,popper:u},attributes:{},styles:{}},c=[],l=!1,f={state:s,setOptions:function(e){p(),s.options=Object.assign(Object.assign(Object.assign({},h),s.options),e),s.scrollParents={reference:m(a)?b(a):a.contextElement?b(a.contextElement):[],popper:b(u)};var n,t,r,o,i,e=(e=[].concat(d,s.options.modifiers),t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e},{}),e=Object.keys(t).map(function(e){return t[e]}),n=D(e),A.reduce(function(e,t){return e.concat(n.filter(function(e){return e.phase===t}))},[]));return s.orderedModifiers=e.filter(function(e){return e.enabled}),"production"!==_e.env.NODE_ENV&&(e=[].concat(e,s.options.modifiers),o=function(e){return e.name},i=new Set,e=e.filter(function(e){e=o(e);if(!i.has(e))return i.add(e),!0}),(r=e).forEach(function(n){Object.keys(n).forEach(function(e){switch(e){case"name":"string"!=typeof n.name&&console.error(B(N,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":"boolean"!=typeof n.enabled&&console.error(B(N,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));case"phase":A.indexOf(n.phase)<0&&console.error(B(N,n.name,'"phase"',"either "+A.join(", "),'"'+String(n.phase)+'"'));break;case"fn":"function"!=typeof n.fn&&console.error(B(N,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":"function"!=typeof n.effect&&console.error(B(N,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":Array.isArray(n.requires)||console.error(B(N,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(B(N,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+F.map(function(e){return'"'+e+'"'}).join(", ")+'; but "'+e+'" was provided.')}n.requires&&n.requires.forEach(function(t){null==r.find(function(e){return e.name===t})&&console.error(B(H,String(n.name),t,t))})})}),X(s.options.placement)===I&&(s.orderedModifiers.find(function(e){return"flip"===e.name})||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))),[(e=y(u)).marginTop,e.marginRight,e.marginBottom,e.marginLeft].some(function(e){return parseFloat(e)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))),s.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,n=void 0===n?{}:n,e=e.effect;"function"==typeof e&&(n=e({state:s,name:t,instance:f,options:n}),c.push(n||function(){}))}),f.update()},forceUpdate:function(){if(!l){var e=s.elements,t=e.reference,e=e.popper;if(ee(t,e)){s.rects={reference:g(t,S(e),"fixed"===s.options.strategy),popper:O(e)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(e){return s.modifiersData[e.name]=Object.assign({},e.data)});for(var n,r,o,i=0,a=0;a<s.orderedModifiers.length;a++){if("production"!==_e.env.NODE_ENV&&100<(i+=1)){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}!0!==s.reset?(n=(o=s.orderedModifiers[a]).fn,r=void 0===(r=o.options)?{}:r,o=o.name,"function"==typeof n&&(s=n({state:s,options:r,name:o,instance:f})||s)):(s.reset=!1,a=-1)}}else"production"!==_e.env.NODE_ENV&&console.error(Q)}},update:(n=function(){return new Promise(function(e){f.forceUpdate(),e(s)})},function(){return r=r||new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(n())})})}),destroy:function(){p(),l=!0}};return ee(a,u)?f.setOptions(t).then(function(e){!l&&t.onFirstUpdate&&t.onFirstUpdate(e)}):"production"!==_e.env.NODE_ENV&&console.error(Q),f;function p(){c.forEach(function(e){return e()}),c=[]}}}var te={passive:!0};var t={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=void 0===(e=r.scroll)||e,i=void 0===(r=r.resize)||r,a=h(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(e){e.addEventListener("scroll",n.update,te)}),i&&a.addEventListener("resize",n.update,te),function(){o&&u.forEach(function(e){e.removeEventListener("scroll",n.update,te)}),i&&a.removeEventListener("resize",n.update,te)}},data:{}};var n={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,e=e.name;t.modifiersData[e]=W({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},ne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function i(e){var t=e.popper,n=e.popperRect,r=e.placement,o=e.offsets,i=e.position,a=e.gpuAcceleration,u=e.adaptive,s=(f=(d=o).x,p=d.y,d=window.devicePixelRatio||1,{x:Math.round(f*d)/d||0,y:Math.round(p*d)/d||0}),c=s.x,l=s.y,e=o.hasOwnProperty("x"),f=o.hasOwnProperty("y"),p=j,d=P,s=window;u&&((o=S(t))===h(t)&&(o=v(t)),r===P&&(d=k,l-=o.clientHeight-n.height,l*=a?1:-1),r===j&&(p=E,c-=o.clientWidth-n.width,c*=a?1:-1));var u=Object.assign({position:i},u&&ne);return a?Object.assign(Object.assign({},u),{},((a={})[d]=f?"0":"",a[p]=e?"0":"",a.transform=(s.devicePixelRatio||1)<2?"translate("+c+"px, "+l+"px)":"translate3d("+c+"px, "+l+"px, 0)",a)):Object.assign(Object.assign({},u),{},((u={})[d]=f?l+"px":"",u[p]=e?c+"px":"",u.transform="",u))}var re={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t,n=e.state,r=e.options,e=void 0===(e=r.gpuAcceleration)||e,r=void 0===(r=r.adaptive)||r;"production"!==_e.env.NODE_ENV&&(t=y(n.elements.popper).transitionProperty||"",r&&["transform","top","right","bottom","left"].some(function(e){return 0<=t.indexOf(e)})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))),e={placement:X(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:e},null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign(Object.assign({},n.styles.popper),i(Object.assign(Object.assign({},e),{},{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:r})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign(Object.assign({},n.styles.arrow),i(Object.assign(Object.assign({},e),{},{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1})))),n.attributes.popper=Object.assign(Object.assign({},n.attributes.popper),{},{"data-popper-placement":n.placement})},data:{}};var oe={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var o=e.state;Object.keys(o.elements).forEach(function(e){var t=o.styles[e]||{},n=o.attributes[e]||{},r=o.elements[e];f(r)&&u(r)&&(Object.assign(r.style,t),Object.keys(n).forEach(function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var r=e.state,o={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,o.popper),r.elements.arrow&&Object.assign(r.elements.arrow.style,o.arrow),function(){Object.keys(r.elements).forEach(function(e){var t=r.elements[e],n=r.attributes[e]||{},e=Object.keys((r.styles.hasOwnProperty(e)?r.styles:o)[e]).reduce(function(e,t){return e[t]="",e},{});f(t)&&u(t)&&(Object.assign(t.style,e),Object.keys(n).forEach(function(e){t.removeAttribute(e)}))})}},requires:["computeStyles"]};var ie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var a=e.state,t=e.options,n=e.name,u=void 0===(r=t.offset)?[0,0]:r,e=C.reduce(function(e,t){var n,r,o,i;return e[t]=(n=t,r=a.rects,o=u,i=X(n),t=0<=[j,P].indexOf(i)?-1:1,o=(o=(n="function"==typeof o?o(Object.assign(Object.assign({},r),{},{placement:n})):o)[0])||0,n=((n=n[1])||0)*t,0<=[j,E].indexOf(i)?{x:n,y:o}:{x:o,y:n}),e},{}),r=(t=e[a.placement]).x,t=t.y;null!=a.modifiersData.popperOffsets&&(a.modifiersData.popperOffsets.x+=r,a.modifiersData.popperOffsets.y+=t),a.modifiersData[n]=e}},ae={left:"right",right:"left",bottom:"top",top:"bottom"};function ue(e){return e.replace(/left|right|bottom|top/g,function(e){return ae[e]})}var se={start:"end",end:"start"};function ce(e){return e.replace(/start|end/g,function(e){return se[e]})}var le={name:"flip",enabled:!0,phase:"main",fn:function(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var o=t.mainAxis,i=void 0===o||o,e=t.altAxis,a=void 0===e||e,o=t.fallbackPlacements,u=t.padding,s=t.boundary,c=t.rootBoundary,l=t.altBoundary,e=t.flipVariations,f=void 0===e||e,p=t.allowedAutoPlacements,e=n.options.placement,t=X(e),t=o||(t===e||!f?[ue(e)]:function(e){if(X(e)===I)return[];var t=ue(e);return[ce(e),t,ce(t)]}(e)),d=[e].concat(t).reduce(function(e,t){return e.concat(X(t)===I?function(n,e){void 0===e&&(e={});var t=e.placement,r=e.boundary,o=e.rootBoundary,i=e.padding,a=e.flipVariations,u=void 0===(e=e.allowedAutoPlacements)?C:e,s=V(t),t=s?a?R:R.filter(function(e){return V(e)===s}):M;0===(a=t.filter(function(e){return 0<=u.indexOf(e)})).length&&(a=t,"production"!==_e.env.NODE_ENV&&console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var c=a.reduce(function(e,t){return e[t]=J(n,{placement:t,boundary:r,rootBoundary:o,padding:i})[X(t)],e},{});return Object.keys(c).sort(function(e,t){return c[e]-c[t]})}(n,{placement:t,boundary:s,rootBoundary:c,padding:u,flipVariations:f,allowedAutoPlacements:p}):t)},[]),h=n.rects.reference,m=n.rects.popper,v=new Map,y=!0,g=d[0],b=0;b<d.length;b++){var _=d[b],w=X(_),x=V(_)===L,O=0<=[P,k].indexOf(w),S=O?"width":"height",T=J(n,{placement:_,boundary:s,rootBoundary:c,altBoundary:l,padding:u}),O=O?x?E:j:x?k:P;h[S]>m[S]&&(O=ue(O));x=ue(O),S=[];if(i&&S.push(T[w]<=0),a&&S.push(T[O]<=0,T[x]<=0),S.every(function(e){return e})){g=_,y=!1;break}v.set(_,S)}if(y)for(var A=f?3:1;0<A;A--)if("break"===function(t){var e=d.find(function(e){e=v.get(e);if(e)return e.slice(0,t).every(function(e){return e})});if(e)return g=e,"break"}(A))break;n.placement!==g&&(n.modifiersData[r]._skip=!0,n.placement=g,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function fe(e,t,n){return Math.max(e,Math.min(t,n))}var pe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.options,o=e.name,i=void 0===(_=r.mainAxis)||_,a=void 0!==(w=r.altAxis)&&w,u=r.boundary,s=r.rootBoundary,c=r.altBoundary,l=r.padding,f=void 0===(x=r.tether)||x,p=r.tetherOffset,d=void 0===p?0:p,h=J(n,{boundary:u,rootBoundary:s,padding:l,altBoundary:c}),m=X(n.placement),v=V(n.placement),y=!v,g=U(m),b="x"===g?"y":"x",e=n.modifiersData.popperOffsets,_=n.rects.reference,w=n.rects.popper,x="function"==typeof d?d(Object.assign(Object.assign({},n.rects),{},{placement:n.placement})):d,r={x:0,y:0};e&&(i&&(p="y"===g?P:j,u="y"===g?k:E,s="y"===g?"height":"width",t=e[g],l=e[g]+h[p],c=e[g]-h[u],m=f?-w[s]/2:0,d=(v===L?_:w)[s],i=v===L?-w[s]:-_[s],v=n.elements.arrow,w=f&&v?O(v):{width:0,height:0},p=(v=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:z())[p],u=v[u],w=fe(0,_[s],w[s]),p=y?_[s]/2-m-w-p-x:d-w-p-x,w=y?-_[s]/2+m+w+u+x:i+w+u+x,x=(u=n.elements.arrow&&S(n.elements.arrow))?"y"===g?u.clientTop||0:u.clientLeft||0:0,u=n.modifiersData.offset?n.modifiersData.offset[n.placement][g]:0,x=e[g]+p-u-x,u=e[g]+w-u,c=fe(f?Math.min(l,x):l,t,f?Math.max(c,u):c),e[g]=c,r[g]=c-t),a&&(t="x"===g?P:j,a="x"===g?k:E,a=fe((g=e[b])+h[t],g,g-h[a]),e[b]=a,r[b]=a-g),n.modifiersData[o]=r)},requiresIfExists:["offset"]};var de={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,r,o=e.state,i=e.name,a=o.elements.arrow,u=o.modifiersData.popperOffsets,s=X(o.placement),c=U(s),l=0<=[j,E].indexOf(s)?"height":"width";a&&u&&(t=o.modifiersData[i+"#persistent"].padding,n=O(a),r="y"===c?P:j,e="y"===c?k:E,s=o.rects.reference[l]+o.rects.reference[c]-u[c]-o.rects.popper[l],u=u[c]-o.rects.reference[c],a=(a=S(a))?"y"===c?a.clientHeight||0:a.clientWidth||0:0,u=s/2-u/2,r=t[r],e=a-n[l]-t[e],e=fe(r,u=a/2-n[l]/2+u,e),o.modifiersData[i]=((i={})[c]=e,i.centerOffset=e-u,i))},effect:function(e){var t=e.state,n=e.options,r=e.name,e=void 0===(e=n.element)?"[data-popper-arrow]":e,n=void 0===(n=n.padding)?0:n;null!=e&&("string"==typeof e&&!(e=t.elements.popper.querySelector(e))||("production"!==_e.env.NODE_ENV&&(f(e)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" "))),Y(t.elements.popper,e)?(t.elements.arrow=e,t.modifiersData[r+"#persistent"]={padding:K("number"!=typeof n?n:Z(n,M))}):"production"!==_e.env.NODE_ENV&&console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "))))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function he(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function me(t){return[P,E,k,j].some(function(e){return 0<=t[e]})}var ve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=J(t,{elementContext:"reference"}),e=J(t,{altBoundary:!0}),r=he(a,r),e=he(e,o,i),o=me(r),i=me(e);t.modifiersData[n]={referenceClippingOffsets:r,popperEscapeOffsets:e,isReferenceHidden:o,hasPopperEscaped:i},t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-reference-hidden":o,"data-popper-escaped":i})}},ye=e({defaultModifiers:[t,n,re,oe]}),ge=[t,n,re,oe,ie,le,pe,de,ve],be=e({defaultModifiers:ge});we.applyStyles=oe,we.arrow=de,we.computeStyles=re,we.createPopper=be,we.createPopperLite=ye,we.defaultModifiers=ge,we.detectOverflow=J,we.eventListeners=t,we.flip=le,we.hide=ve,we.offset=ie,we.popperGenerator=e,we.popperOffsets=n,we.preventOverflow=pe}).call(this)}).call(this,e("_process"))},{_process:35}],27:[function(e,t,n){!function(){"use strict";var t="ontouchstart"in document;"maxTouchPoints"in Navigator.prototype||Object.defineProperty(Navigator.prototype,"maxTouchPoints",{value:"maxTouchPoints"in navigator?navigator.maxTouchPoints:"msMaxTouchPoints"in navigator?navigator.msMaxTouchPoints:t?1:0,enumerable:!0});function u(e){switch(e){case"gotpointercapture":case"lostpointercapture":case"pointerdown":case"pointermove":case"pointerup":case"pointercancel":case"pointerenter":case"pointerleave":case"pointerout":case"pointerover":return 1;default:return}}var n,e=["pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"].every(function(e){return"on"+e in window});e||(n=EventTarget.prototype.dispatchEvent,EventTarget.prototype.dispatchEvent=function(e){var t;return!u(e.type)||null!=(t=this["on"+e.type])&&t(e),n.call(this,e)});var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var d={pointerId:0,width:1,height:1,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:"",isPrimary:!1},h={writable:!1,configurable:!0,enumerable:!0};function r(e,t){return p({value:null!=t?t:d[e]},h)}var o=new Set,l=(i.prototype.deepPath=function(){return[]},i.prototype.composedPath=function(){return[]},i.prototype.getModifierState=function(e){return!1},i.prototype.initEvent=function(e,t,n){},i.prototype.initMouseEvent=function(e,t,n,r,o,i,a,u,s,c,l,f,p,d,h){},i.prototype.initUIEvent=function(e,t,n,r,o){},i.prototype.preventDefault=function(){},i.prototype.stopImmediatePropagation=function(){},i.prototype.stopPropagation=function(){},i);function i(e,t){void 0===t&&(t={});var n={pointerId:r("pointerId",t.pointerId),width:r("width",t.width),height:r("height",t.height),pressure:r("pressure",t.pressure),tangentialPressure:r("tangentialPressure",t.tangentialPressure),tiltX:r("tiltX",t.tiltX),tiltY:r("tiltY",t.tiltY),twist:r("twist",t.twist),pointerType:r("pointerType",t.pointerType),isPrimary:r("isPrimary",t.isPrimary)},t=new MouseEvent(e,t);return Object.defineProperties(t,n),o.add(n.pointerId.value),t}function s(e){if(t)switch(e){case"pointerdown":return"touchstart";case"pointermove":return"touchmove";case"pointerup":return"touchend";case"pointercancel":return"touchcancel";case"pointerout":case"pointerleave":case"pointerenter":case"pointerover":case"lostpointercapture":case"gotpointercapture":return null}else switch(e){case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"pointercancel":return null;case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerenter":return"mouseenter";case"pointerover":return"mouseover";case"lostpointercapture":case"gotpointercapture":return null}throw new TypeError("Event of type: '"+e+"' could not be handled!")}function m(e){return null!=e&&"offsetLeft"in e}function f(e){return"nodeType"in e&&1===e.nodeType?e.parentNode:"ShadowRoot"in window&&e instanceof window.ShadowRoot?e.host:e===document?window:e instanceof Node?e.parentNode:null}var v=new Map;function y(e,t){return"pointerup"===e?0:"force"in t?t.force:"webkitForce"in t?t.webkitForce:d.pressure}function g(e,t,n,r){e=v.get(e);return void 0!==e?e:"pointermove"===t&&m(n.target)&&m(n.currentTarget)?function(e){for(var t=e;null!=t;){if("ShadowRoot"in window&&t instanceof window.ShadowRoot)return t;var n=f(t);if(n===t)return document;t=n}return document}(n.currentTarget).elementFromPoint(r.clientX,r.clientY):n.target}function a(e){for(var t=[],n=e;null!=n&&(t.push(n),n=f(n),t[t.length-1]!==n););return t}function b(e,t,n,r){Object.defineProperties(e,p({},void 0===t?{}:{target:p({value:t},h)},void 0===n?{}:{currentTarget:p({value:n},h)},void 0===r?{}:{relatedTarget:p({value:r},h)}))}var _=d.pointerId+1,w=_+1;function x(e){return e.identifier+w}function O(e,t){switch(e){case"pointerover":case"pointerdown":case"pointermove":case"pointerup":return!0;default:return t.cancelable}}function S(e,t){switch(e){case"pointerover":case"pointerdown":case"pointermove":case"pointerup":case"pointercancel":case"pointerout":case"gotpointercapture":case"lostpointercapture":return!0;default:return t.bubbles}}var T=new Set(["cancelBubble","currentTarget","defaultPrevented","eventPhase","returnValue","scoped","srcElement","timeStamp","deepPath","AT_TARGET","BUBBLING_PHASE","CAPTURING_PHASE","NONE"]),A=new Set(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}(T,["view"],"sourceCapabilities"in UIEvent.prototype?["sourceCapabilities"]:[]));function P(e){var t=e.dynamicPropertiesHandler,n=e.e,r=e.initOptions,o=e.overwrittenMouseEventProperties,e=e.type,r=new l(e,r),i=r.preventDefault,a=r.stopPropagation,u=r.stopImmediatePropagation;r.preventDefault=function(){i.call(this),n.defaultPrevented||n.preventDefault()},r.stopPropagation=function(){a.call(this),n.stopPropagation()},r.stopImmediatePropagation=function(){u.call(this),n.stopImmediatePropagation()};var s={};return A.forEach(function(e){return s[e]=p({value:n[e]},h)}),s=p({},s,o,t()),Object.defineProperties(r,s),r}var k=new Set;function E(e){var t=e.type,n=e.pointerId;switch(t){case"pointercancel":k.add(n);break;case"pointerdown":case"pointerup":k.delete(n)}}function j(e,t){"function"==typeof t?t(e):t.handleEvent(e)}var I="touchAction",M="touch-action",L=new RegExp(M+":\\s*([^;]*)");var R="___touchAction___",C=5,D=["pointercancel","pointerleave","pointerup","pointerout"],B=new Map;function N(e,t,n,r){switch(t){case"pointerdown":case"pointermove":case"pointerup":case"pointerover":case"pointerenter":case"gotpointercapture":case"lostpointercapture":return o=e,i=t,u=r,s=(a=n).clientX-(m(a.target)?a.target.offsetLeft:0),c=a.clientY-(m(a.target)?a.target.offsetTop:0),l="offsetParent"in a.target?a.target:null,f=null==l?s:a.clientX-l.offsetLeft,l=null==l?c:a.clientY-l.offsetTop,{target:p({value:g(o,i,u,a)},h),relatedTarget:p({value:null},h),button:p({value:"gotpointercapture"===i?-1:0},h),buttons:p({value:"pointerup"===i||"lostpointercapture"===i?0:1},h),clientX:p({value:a.clientX},h),clientY:p({value:a.clientY},h),screenX:p({value:a.screenX},h),screenY:p({value:a.screenY},h),pageX:p({value:a.pageX},h),pageY:p({value:a.pageY},h),x:p({value:a.clientX},h),y:p({value:a.clientY},h),offsetX:p({value:s},h),offsetY:p({value:c},h),layerX:p({value:f},h),layerY:p({value:l},h),movementX:p({value:0},h),movementY:p({value:0},h),width:p({value:function(e){return"radiusX"in e?2*e.radiusX:"webkitRadiusX"in e?2*e.webkitRadiusX:d.width}(a)},h),height:p({value:function(e){return"radiusY"in e?2*e.radiusY:"webkitRadiusY"in e?2*e.webkitRadiusY:d.height}(a)},h),pressure:p({value:y(i,a)},h),tangentialPressure:p({value:d.tangentialPressure},h),tiltX:p({value:d.tiltX},h),tiltY:p({value:d.tiltY},h),twist:p({value:function(e){return"rotationAngle"in e?e.rotationAngle:"webkitRotationAngle"in e?e.webkitRotationAngle:d.twist}(a)},h)};case"pointercancel":case"pointerout":case"pointerleave":return{target:p({value:g(e,t,r,n)},h),relatedTarget:p({value:null},h),button:p({value:0},h),buttons:p({value:0},h),clientX:p({value:0},h),clientY:p({value:0},h),width:p({value:d.width},h),height:p({value:d.height},h),pressure:p({value:d.pressure},h),tangentialPressure:p({value:d.tangentialPressure},h),tiltX:p({value:d.tiltX},h),tiltY:p({value:d.tiltY},h),twist:p({value:d.twist},h),layerX:p({value:0},h),layerY:p({value:0},h),movementX:p({value:0},h),movementY:p({value:0},h),offsetX:p({value:0},h),offsetY:p({value:0},h),pageX:p({value:0},h),pageY:p({value:0},h),screenX:p({value:0},h),screenY:p({value:0},h),x:p({value:0},h),y:p({value:0},h)};default:throw new TypeError("Error: Could not handle dynamic properties for a PointerEvent of type: '"+t+"'")}var o,i,a,u,s,c,l,f}function H(e,t,a,n){switch(e){case"pointermove":if(m(a.target)&&m(a.currentTarget)){var u=a[R];if("auto"!==u){n.forEach(function(e){var t,n,r=e.pointerId,o=e.clientX,i=e.clientY;!a.cancelable||a.defaultPrevented||null!=(t=B.get(r))&&(n=o-t.clientX,e=Math.abs(n),r=i-t.clientY,o=Math.abs(r),i=C<e&&o<e,t=C<o&&e<o,e=0<r,o=r<0,r=0<n,n=n<0,"none"===u?(i||t)&&a.preventDefault():"pan-y"===u?i&&a.preventDefault():"pan-y pan-left"===u?n&&a.preventDefault():"pan-y pan-right"===u?r&&a.preventDefault():"pan-up"===u?e||a.preventDefault():"pan-down"===u?o||a.preventDefault():"pan-left"===u?r||a.preventDefault():"pan-right"===u?n||a.preventDefault():"pan-x"===u?t&&a.preventDefault():"pan-x pan-up"===u?o&&a.preventDefault():"pan-x pan-down"===u&&e&&a.preventDefault())});break}if(a.target!==a.currentTarget){if(Array.from(a.changedTouches).some(function(e){return v.has(x(e))}))break;q("pointercancel",a,t)}}break;case"pointerdown":q("pointerover",a,t),q("pointerenter",a,t)}}function F(e,t,n){var r,o,i,a,u,s,c=n.target,l=n.currentTarget;switch("pointerup"!==e&&"pointercancel"!==e||Array.from(n.changedTouches).forEach(function(e){var t=x(e),e=v.get(t);null!=e&&m(e)&&e.releasePointerCapture(t)}),e){case"pointerdown":m(n.currentTarget)&&(r=function(){},o=function(){t.removeEventListener("pointermove",r),null!=D&&D.forEach(function(e){t.removeEventListener(e,o)})},t.addEventListener("pointermove",r),i=function(e){for(var t,n=[],r=e;null!=r;){"style"in r&&(t=(o=getComputedStyle(r).getPropertyValue("overflow")).startsWith("visible")||o.startsWith("scroll"),o=o.endsWith("visible")||o.endsWith("scroll"),(t||o)&&n.push({canScrollX:t,canScrollY:o,scrollElement:r}));var o=f(r);if(o===r)break;r=o}return n}(n.currentTarget),a=!1,u=function(){null!=i&&(i.forEach(function(e){return e.scrollElement.removeEventListener("scroll",s)}),i=null),null!=D&&D.forEach(function(e){t.removeEventListener(e,u)})},s=function(){a||(a=!0,b(n,c,l),q("pointercancel",n,t)),u()},i.forEach(function(e){return e.scrollElement.addEventListener("scroll",s)}),D.forEach(function(e){t.addEventListener(e,u),t.addEventListener(e,o)}));break;case"pointercancel":q("pointerout",n,t),q("pointerleave",n,t)}}function X(e,t){var n,r,o,i,a,u,s;m(t.currentTarget)&&(n=(a=function(e){for(var t=[],n=e;null!=n;){var r,o,i=null;"style"in n&&(null!=(i=n.style[I])&&""!==i||(null==(r=n.getAttribute("style"))||!r.includes(M)||null!=(o=r.match(L))&&(i=c(o,2)[1])),null!=i&&""!==i||null!=(o=e.getAttribute("touch-action"))&&""!==o&&(i=o),null!=i&&t.push({element:n,touchAction:new Set(i.split(/\s/).map(function(e){return e.trim()}))}));i=f(n);if(i===n)break;n=i}return t}(t.currentTarget)).some(function(e){return e.touchAction.has("none")}),u=a.some(function(e){return e.touchAction.has("pan-x")}),s=a.some(function(e){return e.touchAction.has("pan-y")}),r=a.some(function(e){return e.touchAction.has("pan-up")}),o=a.some(function(e){return e.touchAction.has("pan-down")}),i=a.some(function(e){return e.touchAction.has("pan-left")}),a=a.some(function(e){return e.touchAction.has("pan-right")}),s=n||s||r&&o,(u=n||u||i&&a)&&s?Object.defineProperty(t,R,{value:"none"}):u?r?Object.defineProperty(t,R,{value:"pan-x pan-up"}):o?Object.defineProperty(t,R,{value:"pan-x pan-down"}):Object.defineProperty(t,R,{value:"pan-x"}):s?i?Object.defineProperty(t,R,{value:"pan-y pan-left"}):a?Object.defineProperty(t,R,{value:"pan-y pan-right"}):Object.defineProperty(t,R,{value:"pan-y"}):r?i?Object.defineProperty(t,R,{value:"pan-up pan-left"}):a&&Object.defineProperty(t,R,{value:"pan-up pan-right"}):o?i?Object.defineProperty(t,R,{value:"pan-down pan-left"}):a&&Object.defineProperty(t,R,{value:"pan-down pan-right"}):i?Object.defineProperty(t,R,{value:"pan-left"}):a?Object.defineProperty(t,R,{value:"pan-right"}):r?Object.defineProperty(t,R,{value:"pan-up"}):o?Object.defineProperty(t,R,{value:"pan-down"}):Object.defineProperty(t,R,{value:"auto"}))}function Y(o,i){return X(0,i),Array.from(i.changedTouches).map(function(e){var t=x(e),n=p({},i,{pointerId:t,pointerType:"touch",isPrimary:e===i.changedTouches[0],bubbles:S(o,i),cancelable:O(o,i)});if("pointerout"!==o&&"pointerleave"!==o&&k.has(t))return i.cancelable&&!i.defaultPrevented&&i.preventDefault(),E({type:o,pointerId:t}),null;var r=p({scoped:p({value:i.scoped},h),fromElement:p({value:null},h),toElement:p({value:null},h),detail:p({value:0},h),composed:p({value:!0},h),composedPath:p({value:function(){return a(i.target)}},h)},"region"in Touch.prototype?{region:p({value:e.region},h)}:{},"path"in Event.prototype&&m(e.target)?{path:p({value:a(e.target)},h)}:{},"deepPath"in Event.prototype&&m(e.target)?{path:p({value:function(){return a(e.target)}},h)}:{}),r=P({e:i,type:o,initOptions:n,overwrittenMouseEventProperties:r,dynamicPropertiesHandler:function(){return N(t,o,e,i)}});return b(i,r.target,r.currentTarget,r.relatedTarget),"pointerdown"===o&&B.set(t,r),r}).filter(function(e){return null!=e})}function q(e,t,n){var r=Y(e,t);H(e,n,t,r),r.forEach(function(e){E(e),n.dispatchEvent(e)}),F(e,n,t)}function G(e,t,n,r){var o;e=e,o=r,n=Y(r=t,t=n),H(r,e,t,n),n.forEach(function(e){E(e),j(e,o)}),F(r,e,t)}function $(e,t){e=v.get(e);return void 0!==e?e:t.target}var V=new Map;function U(e,t){switch(e){case"pointercancel":case"pointerup":null!=t.currentTarget&&V.has(t.currentTarget)&&(V.get(t.currentTarget).dispose(),V.delete(t.currentTarget));var n=v.get(_);null!=n&&m(n)&&n.releasePointerCapture(_);break;case"pointerdown":null==t.currentTarget||V.has(t.currentTarget)||V.set(t.currentTarget,(i=(o=t).target,a=o.currentTarget,u=function(e){var t=m(a)?a.getBoundingClientRect():{left:0,top:0},n=t.left,t=t.top;K("pointerup",o,a,{target:p({value:i},h),currentTarget:p({value:a},h),clientX:p({value:e.clientX},h),clientY:p({value:e.clientY},h),screenX:p({value:e.screenX},h),screenY:p({value:e.screenY},h),layerX:p({value:e.layerX},h),layerY:p({value:e.layerY},h),movementX:p({value:e.movementX},h),movementY:p({value:e.movementY},h),offsetX:p({value:e.clientX-n},h),offsetY:p({value:e.clientY-t},h),pageX:p({value:e.pageX},h),pageY:p({value:e.pageY},h),x:p({value:e.x},h),y:p({value:e.y},h)}),r()},window.addEventListener("mouseup",u),{dispose:r}))}function r(){window.removeEventListener("mouseup",u)}var o,i,a,u}function W(e,t,n){switch(t){case"pointerdown":case"pointermove":case"pointerup":case"pointerover":case"pointerenter":case"gotpointercapture":case"lostpointercapture":return r=t,{target:p({value:$(e,o=n)},h),button:p({value:"pointerover"===r||"gotpointercapture"===r?-1:"lostpointercapture"===r?0:o.button},h),buttons:p({value:"lostpointercapture"===r?0:"gotpointercapture"===r?1:o.buttons},h),clientX:p({value:o.clientX},h),clientY:p({value:o.clientY},h),screenX:p({value:o.screenX},h),screenY:p({value:o.screenY},h),layerX:p({value:o.layerX},h),layerY:p({value:o.layerY},h),movementX:p({value:o.movementX},h),movementY:p({value:o.movementY},h),offsetX:p({value:o.offsetX},h),offsetY:p({value:o.offsetY},h),pageX:p({value:o.pageX},h),pageY:p({value:o.pageY},h),x:p({value:o.x},h),y:p({value:o.y},h),relatedTarget:p({value:null},h),width:p({value:1},h),height:p({value:1},h),pressure:p({value:y(r,o)},h),tangentialPressure:p({value:0},h),tiltX:p({value:0},h),tiltY:p({value:0},h),twist:p({value:0},h)};case"pointerout":case"pointerleave":case"pointercancel":return{target:p({value:$(e,o=n)},h),button:p({value:o.button},h),buttons:p({value:o.buttons},h),clientX:p({value:o.clientX},h),clientY:p({value:o.clientY},h),screenX:p({value:o.screenX},h),screenY:p({value:o.screenY},h),layerX:p({value:o.layerX},h),layerY:p({value:o.layerY},h),movementX:p({value:o.movementX},h),movementY:p({value:o.movementY},h),offsetX:p({value:o.offsetX},h),offsetY:p({value:o.offsetY},h),pageX:p({value:o.pageX},h),pageY:p({value:o.pageY},h),x:p({value:o.x},h),y:p({value:o.y},h),relatedTarget:p({value:o.relatedTarget},h),width:p({value:1},h),height:p({value:1},h),pressure:p({value:y("pointerout",o)},h),tangentialPressure:p({value:0},h),tiltX:p({value:0},h),tiltY:p({value:0},h),twist:p({value:0},h)};default:throw new TypeError("Error: Could not handle dynamic properties for a PointerEvent of type: '"+t+"'")}var r,o}function z(e,t){var n=_,r=p({},t,{pointerId:n,pointerType:"mouse",isPrimary:!0,bubbles:S(e,t),cancelable:O(e,t)});if(("pointerout"===e||"pointerleave"===e)&&v.has(n))return t.cancelable&&!t.defaultPrevented&&t.preventDefault(),[];var o=p({scoped:p({value:t.scoped},h),fromElement:p({value:null},h),toElement:p({value:null},h),detail:p({value:0},h),composed:p({value:!0},h),composedPath:p({value:function(){return a(t.target)}},h)},"region"in MouseEvent.prototype?{region:p({value:t.region},h)}:{},"path"in t?{path:p({value:t.path},h)}:{},"deepPath"in Event.prototype&&m(t.target)?{path:p({value:function(){return a(t.target)}},h)}:{}),o=P({e:t,type:e,initOptions:r,overwrittenMouseEventProperties:o,dynamicPropertiesHandler:function(){return W(n,e,t)}});return b(t,o.target,o.currentTarget,o.relatedTarget),[o]}function K(e,t,n,r){z(e,t).forEach(function(e){null!=r&&Object.defineProperties(e,r),E(e),n.dispatchEvent(e)}),U(e,t)}function Z(e,t,n,r){var o;o=r,z(t=t,n=n).forEach(function(e){E(e),j(e,o)}),U(t,n)}var J=new Map;function Q(e,t){var n=J.get(e);null==n&&(n=new Set,J.set(e,n)),n.add(t)}var ee,te,T="PointerEvent"in window;T||(ee=EventTarget.prototype.addEventListener,EventTarget.prototype.addEventListener=function(t,n,e){var r,o,i,a=this;if(null==n)return ee(t,n,e);u(t)?(o=function(e){return"changedTouches"in e?G(a,t,e,n):Z(0,t,e,n)},i=function(e){e.isTrusted||j(e,n)},null!=(r=s(t))&&(ee.call(this,r,o,e),Q(n,o)),ee.call(this,t,i,e),Q(n,i)):ee.call(this,t,n,e)}),T||(te=EventTarget.prototype.removeEventListener,EventTarget.prototype.removeEventListener=function(t,e,n){var r=this,o=u(t)?s(t):void 0;if(null==e)return te.call(this,t,null,n),void(null!=o&&te.call(this,o,null,n));var i=J.get(e);null!=i?(i.forEach(function(e){te.call(r,t,e,n),null!=o&&te.call(r,o,e,n)}),J.delete(e)):(te.call(this,t,e,n),null!=o&&te.call(this,o,e,n))}),e||(EventTarget.prototype.ongotpointercapture=null,EventTarget.prototype.onlostpointercapture=null,EventTarget.prototype.onpointerdown=null,EventTarget.prototype.onpointermove=null,EventTarget.prototype.onpointerup=null,EventTarget.prototype.onpointercancel=null,EventTarget.prototype.onpointerover=null,EventTarget.prototype.onpointerout=null,EventTarget.prototype.onpointerenter=null,EventTarget.prototype.onpointerleave=null);var ne=!1,e=function(){ne=null!=document.pointerLockElement&&null!=document.mozPointerLockElement};function re(t,n){var r;try{r=new DOMException(t,n)}catch(e){r=new Error(n+": "+t),null!=n&&(r.name=n)}throw r}document.addEventListener("pointerlockchange",e),document.addEventListener("mozpointerlockchange",e),T||(Element.prototype.setPointerCapture=function(e){o.has(e)||re("Could not set pointer capture on an element: No active pointers exist with the given pointer id: '"+e+"'","InvalidPointerId"),this.isConnected||re("Could not set pointer capture on an element: It wasn't connected!","InvalidStateError"),ne&&re("Could not set pointer capture on an element: The document had a PointerLock!","InvalidStateError"),v.set(e,this),t?q("gotpointercapture",new TouchEvent(""),this):K("gotpointercapture",new MouseEvent(""),this)}),T||(Element.prototype.releasePointerCapture=function(e){o.has(e)||re("Could not release pointer capture on an element: No active pointers exist with the given pointer id: '"+e+"'","InvalidPointerId"),v.delete(e),t?q("lostpointercapture",new TouchEvent(""),this):K("lostpointercapture",new MouseEvent(""),this)}),T||(Element.prototype.hasPointerCapture=function(e){return null!=v.get(e)}),T||(window.PointerEvent=l)}()},{}],28:[function(x,O,e){(function(w){(function(){"use strict";var e=x("object-assign");function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function a(e){return w.Buffer&&"function"==typeof w.Buffer.isBuffer?w.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var l=x("util/"),r=Object.prototype.hasOwnProperty,f=Array.prototype.slice,t="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function s(e){return!a(e)&&("function"==typeof w.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var c=O.exports=m,n=/\s*function\s+([^\(\s]*)\s*/;function o(e){if(l.isFunction(e)){if(t)return e.name;e=e.toString().match(n);return e&&e[1]}}function p(e,t){return"string"!=typeof e||e.length<t?e:e.slice(0,t)}function d(e){if(t||!l.isFunction(e))return l.inspect(e);e=o(e);return"[Function"+(e?": "+e:"")+"]"}function h(e,t,n,r,o){throw new c.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function m(e,t){e||h(e,!0,t,"==",c.ok)}function v(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(l.isDate(e)&&l.isDate(t))return e.getTime()===t.getTime();if(l.isRegExp(e)&&l.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var o=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(l.isPrimitive(e)||l.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=y(e),i=y(t);if(o&&!i||!o&&i)return!1;if(o)return e=f.call(e),t=f.call(t),v(e,t,n);var a,u,s=_(e),c=_(t);if(s.length!==c.length)return!1;for(s.sort(),c.sort(),u=s.length-1;0<=u;u--)if(s[u]!==c[u])return!1;for(u=s.length-1;0<=u;u--)if(a=s[u],!v(e[a],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t){if(e&&t){if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return 1}catch(e){}return Error.isPrototypeOf(t)?void 0:!0===t.call({},e)}}function b(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&h(o,n,"Missing expected exception"+r);var i="string"==typeof r,t=!e&&o&&!n;if((!e&&l.isError(o)&&i&&g(o,n)||t)&&h(o,n,"Got unwanted exception"+r),e&&o&&n&&!g(o,n)||!e&&o)throw o}c.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=p(d((t=this).actual),128)+" "+t.operator+" "+p(d(t.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||h;Error.captureStackTrace?Error.captureStackTrace(this,t):(e=new Error).stack&&(e=e.stack,t=o(t),0<=(t=e.indexOf("\n"+t))&&(t=e.indexOf("\n",t+1),e=e.substring(t+1)),this.stack=e)},l.inherits(c.AssertionError,Error),c.fail=h,c.ok=m,c.equal=function(e,t,n){e!=t&&h(e,t,n,"==",c.equal)},c.notEqual=function(e,t,n){e==t&&h(e,t,n,"!=",c.notEqual)},c.deepEqual=function(e,t,n){v(e,t,!1)||h(e,t,n,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(e,t,n){v(e,t,!0)||h(e,t,n,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(e,t,n){v(e,t,!1)&&h(e,t,n,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=function e(t,n,r){v(t,n,!0)&&h(t,n,r,"notDeepStrictEqual",e)},c.strictEqual=function(e,t,n){e!==t&&h(e,t,n,"===",c.strictEqual)},c.notStrictEqual=function(e,t,n){e===t&&h(e,t,n,"!==",c.notStrictEqual)},c.throws=function(e,t,n){b(!0,e,t,n)},c.doesNotThrow=function(e,t,n){b(!1,e,t,n)},c.ifError=function(e){if(e)throw e},c.strict=e(function e(t,n){t||h(t,!0,n,"==",e)},c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual}),c.strict.strict=c.strict;var _=Object.keys||function(e){var t,n=[];for(t in e)r.call(e,t)&&n.push(t);return n}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":34,"util/":31}],29:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],30:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],31:[function(A,e,P){(function(S,T){(function(){var u=/%[sdj%]/g;P.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,i=String(e).replace(u,function(e){if("%%"===e)return"%";if(o<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<o;a=r[++n])h(a)||!b(a)?i+=" "+a:i+=" "+s(a);return i},P.deprecate=function(e,t){if(y(T.process))return function(){return P.deprecate(e,t).apply(this,arguments)};if(!0===S.noDeprecation)return e;var n=!1;return function(){if(!n){if(S.throwDeprecation)throw new Error(t);S.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function s(e,t){var n={seen:[],stylize:i};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),d(t)?n.showHidden=t:t&&P._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),c(n,e,n.depth)}function o(e,t){t=s.styles[t];return t?"["+s.colors[t][0]+"m"+e+"["+s.colors[t][1]+"m":e}function i(e,t){return e}function c(t,n,r){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==P.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return v(e)||(e=c(t,e,r)),e}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(h(t))return e.stylize("null","null")}(t,n);if(o)return o;var i,e=Object.keys(n),a=(i={},e.forEach(function(e,t){i[e]=!0}),i);if(t.showHidden&&(e=Object.getOwnPropertyNames(n)),w(n)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return l(n);if(0===e.length){if(x(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(g(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(w(n))return l(n)}var o="",s=!1,u=["{","}"];return p(n)&&(s=!0,u=["[","]"]),x(n)&&(o=" [Function"+(n.name?": "+n.name:"")+"]"),g(n)&&(o=" "+RegExp.prototype.toString.call(n)),_(n)&&(o=" "+Date.prototype.toUTCString.call(n)),w(n)&&(o=" "+l(n)),0!==e.length||s&&0!=n.length?r<0?g(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),e=s?function(t,n,r,o,e){for(var i=[],a=0,u=n.length;a<u;++a)O(n,String(a))?i.push(f(t,n,r,o,String(a),!0)):i.push("");return e.forEach(function(e){e.match(/^\d+$/)||i.push(f(t,n,r,o,e,!0))}),i}(t,n,r,a,e):e.map(function(e){return f(t,n,r,a,e,s)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(e,o,u)):u[0]+o+u[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o,i){var a,u,t=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]};if(t.get?u=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(u=e.stylize("[Setter]","special")),O(r,o)||(a="["+o+"]"),u||(e.seen.indexOf(t.value)<0?-1<(u=h(n)?c(e,t.value,null):c(e,t.value,n-1)).indexOf("\n")&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),y(a)){if(i&&o.match(/^\d+$/))return u;a=(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+u}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function g(e){return b(e)&&"[object RegExp]"===t(e)}function b(e){return"object"==typeof e&&null!==e}function _(e){return b(e)&&"[object Date]"===t(e)}function w(e){return b(e)&&("[object Error]"===t(e)||e instanceof Error)}function x(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}P.debuglog=function(t){var n;return y(e)&&(e=S.env.NODE_DEBUG||""),t=t.toUpperCase(),r[t]||(new RegExp("\\b"+t+"\\b","i").test(e)?(n=S.pid,r[t]=function(){var e=P.format.apply(P,arguments);console.error("%s %d: %s",t,n,e)}):r[t]=function(){}),r[t]},(P.inspect=s).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},P.isArray=p,P.isBoolean=d,P.isNull=h,P.isNullOrUndefined=function(e){return null==e},P.isNumber=m,P.isString=v,P.isSymbol=function(e){return"symbol"==typeof e},P.isUndefined=y,P.isRegExp=g,P.isObject=b,P.isDate=_,P.isError=w,P.isFunction=x,P.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},P.isBuffer=A("./support/isBuffer");var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}P.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),a[e.getMonth()],t].join(" ")),P.format.apply(P,arguments))},P.inherits=A("inherits"),P._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this)}).call(this,A("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":30,_process:35,inherits:29}],32:[function(e,t,n){var u=Object.create||function(e){function t(){}return t.prototype=e,new t},a=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return t},r=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._maxListeners=void 0;var i,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),i=0===c.x}catch(e){i=!1}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),i=o[t]):(o=e._events=u(null),e._eventsCount=0),i?("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),i.warned||(r=l(e))&&0<r&&i.length>r&&(i.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+i.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",r.name,r.message))):(i=o[t]=n,++e._eventsCount),e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function d(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=r.call(p,e);return t.listener=n,e.wrapFn=t}function h(e,t,n){e=e._events;if(!e)return[];t=e[t];return t?"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):v(t,t.length):[]}function m(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):o.defaultMaxListeners=s,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e,t,n,r){var o,i,a,u,s="error"===e,c=this._events;if(c)s=s&&null==c.error;else if(!s)return!1;if(s){if(1<arguments.length&&(o=t),o instanceof Error)throw o;s=new Error('Unhandled "error" event. ('+o+")");throw s.context=o,s}if(!(i=c[e]))return!1;var l,f="function"==typeof i;switch(l=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=v(e,r),i=0;i<r;++i)o[i].call(n)}(i,f,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=v(e,o),a=0;a<o;++a)i[a].call(n,r)}(i,f,this,t);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=v(e,i),u=0;u<i;++u)a[u].call(n,r,o)}(i,f,this,t,n);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,u=v(e,a),s=0;s<a;++s)u[s].call(n,r,o,i)}(i,f,this,t,n,r);break;default:for(a=new Array(l-1),u=1;u<l;u++)a[u-1]=arguments[u];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=v(e,o),a=0;a<o;++a)i[a].apply(n,r)}(i,f,this,a)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=u(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=u(null):delete n[e]),this;if(0===arguments.length){for(var r,o=a(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],33:[function(e,t,r){(function(n){(function(){!function(){"use strict";function e(){this.init()}e.prototype={init:function(){var e=this||g;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||g;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&0<=e&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,g.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||g;t.ctx||f(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,g.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},stop:function(){for(var e=this||g,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||g,t=e._howls.length-1;0<=t;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||g)._codecs[e.replace(/^x-/,"")]},_setup:function(){var t=this||g;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(e){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||g,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),r=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(r||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var u=this||g;if(!u._audioUnlocked&&u.ctx){u._audioUnlocked=!1,u.autoUnlock=!1,u._mobileUnloaded||44100===u.ctx.sampleRate||(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var s=function(e){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var t=new Audio;t._unlocked=!0,u._releaseHtml5Audio(t)}catch(e){u.noAudio=!0;break}for(var n=0;n<u._howls.length;n++)if(!u._howls[n]._webAudio)for(var r=u._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=u._howls[n]._soundById(r[o]);i&&i._node&&!i._node._unlocked&&(i._node._unlocked=!0,i._node.load())}u._autoResume();var a=u.ctx.createBufferSource();a.buffer=u._scratchBuffer,a.connect(u.ctx.destination),void 0===a.start?a.noteOn(0):a.start(0),"function"==typeof u.ctx.resume&&u.ctx.resume(),a.onended=function(){a.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",s,!0),document.removeEventListener("touchend",s,!0),document.removeEventListener("click",s,!0);for(var e=0;e<u._howls.length;e++)u._howls[e]._emit("unlock")}};return document.addEventListener("touchstart",s,!0),document.addEventListener("touchend",s,!0),document.addEventListener("click",s,!0),u}},_obtainHtml5Audio:function(){var e=this||g;if(e._html5AudioPool.length)return e._html5AudioPool.pop();e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||g;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&g.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){var e;t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())},t.ctx.suspend().then(e,e))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&g.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};function t(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")}var g=new e;t.prototype={init:function(e){var t=this;return g.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=g.usingWebAudio&&!t._html5,void 0!==g.ctx&&g.ctx&&g.autoUnlock&&g._unlockAudio(),g._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(g.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n,r,o=0;o<e._src.length;o++){if(e._format&&e._format[o])n=e._format[o];else{if("string"!=typeof(r=e._src[o])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=(n=(n=/^data:audio\/([^;,]+);/i.exec(r))||/\.([^.]+)$/.exec(r.split("?",1)[0]))&&n[1].toLowerCase()}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&g.codecs(n)){t=e._src[o];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new i(e),e._webAudio&&u(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,n){var r=this,e=null;if("number"==typeof t)e=t,t=null;else{if("string"==typeof t&&"loaded"===r._state&&!r._sprite[t])return null;if(void 0===t&&(t="__default",!r._playLock)){for(var o=0,i=0;i<r._sounds.length;i++)r._sounds[i]._paused&&!r._sounds[i]._ended&&(o++,e=r._sounds[i]._id);1===o?t=null:e=null}}var a=e?r._soundById(e):r._inactiveSound();if(!a)return null;if(e&&!t&&(t=a._sprite||"__default"),"loaded"!==r._state){a._sprite=t,a._ended=!1;var u=a._id;return r._queue.push({event:"play",action:function(){r.play(u)}}),u}if(e&&!a._paused)return n||r._loadQueue("play"),a._id;r._webAudio&&g._autoResume();var s=Math.max(0,0<a._seek?a._seek:r._sprite[t][0]/1e3),c=Math.max(0,(r._sprite[t][0]+r._sprite[t][1])/1e3-s),l=1e3*c/Math.abs(a._rate),f=r._sprite[t][0]/1e3,p=(r._sprite[t][0]+r._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;function d(){a._paused=!1,a._seek=s,a._start=f,a._stop=p,a._loop=!(!a._loop&&!r._sprite[t][2])}if(!(p<=s)){var h,m,v,y=a._node;return r._webAudio?(m=function(){r._playLock=!1,d(),r._refreshBuffer(a);var e=a._muted||r._muted?0:a._volume;y.gain.setValueAtTime(e,g.ctx.currentTime),a._playStart=g.ctx.currentTime,void 0===y.bufferSource.start?a._loop?y.bufferSource.noteGrainOn(0,s,86400):y.bufferSource.noteGrainOn(0,s,c):a._loop?y.bufferSource.start(0,s,86400):y.bufferSource.start(0,s,c),l!=1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),l)),n||setTimeout(function(){r._emit("play",a._id),r._loadQueue()},0)},"running"===g.state&&"interrupted"!==g.ctx.state?m():(r._playLock=!0,r.once("resume",m),r._clearTimer(a._id))):(h=function(){y.currentTime=s,y.muted=a._muted||r._muted||g._muted||y.muted,y.volume=a._volume*g.volume(),y.playbackRate=a._rate;try{var e=y.play();if(e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)?(r._playLock=!0,d(),e.then(function(){r._playLock=!1,y._unlocked=!0,n||(r._emit("play",a._id),r._loadQueue())}).catch(function(){r._playLock=!1,r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):n||(r._playLock=!1,d(),r._emit("play",a._id),r._loadQueue()),y.playbackRate=a._rate,y.paused)return void r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),l):(r._endTimers[a._id]=function(){r._ended(a),y.removeEventListener("ended",r._endTimers[a._id],!1)},y.addEventListener("ended",r._endTimers[a._id],!1))}catch(e){r._emit("playerror",a._id,e)}},"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===y.src&&(y.src=r._src,y.load()),m=window&&window.ejecta||!y.readyState&&g._navigator.isCocoonJS,3<=y.readyState||m?h():(r._playLock=!0,v=function(){h(),y.removeEventListener(g._canPlayEvent,v,!1)},y.addEventListener(g._canPlayEvent,v,!1),r._clearTimer(a._id))),a._id}r._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),o=0;o<r.length;o++){var i=n._soundById(r[o]);i&&(i._muted=e,i._interval&&n._stopFade(i._id),n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,g.ctx.currentTime):i._node&&(i._node.muted=!!g._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]?0<=r._getSoundIds().indexOf(o[0])?t=parseInt(o[0],10):e=parseFloat(o[0]):2<=o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10)),!(void 0!==e&&0<=e&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var i=0;i<t.length;i++)(n=r._soundById(t[i]))&&(n._volume=e,o[2]||r._stopFade(t[i]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,g.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*g.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(e,t,n,r)}}),o;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),o.volume(e,r);for(var i=o._getSoundIds(r),a=0;a<i.length;a++){var u,s,c=o._soundById(i[a]);c&&(r||o._stopFade(i[a]),o._webAudio&&!c._muted&&(s=(u=g.ctx.currentTime)+n/1e3,c._volume=e,c._node.gain.setValueAtTime(e,u),c._node.gain.linearRampToValueAtTime(t,s)),o._startFadeInterval(c,e,t,n,i[a],void 0===r))}return o},_startFadeInterval:function(t,n,r,o,e,i){var a=this,u=n,s=r-n,c=Math.abs(s/.01),c=Math.max(4,0<c?o/c:o),l=Date.now();t._fadeTo=r,t._interval=setInterval(function(){var e=(Date.now()-l)/o;l=Date.now(),u+=s*e,u=Math.round(100*u)/100,u=s<0?Math.max(r,u):Math.min(r,u),a._webAudio?t._volume=u:a.volume(u,t._id,!0),i&&(a._volume=u),(r<n&&u<=r||n<r&&r<=u)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(r,t._id),a._emit("fade",t._id))},c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(g.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=arguments;if(0===r.length)return this._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=this._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],this._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var o=this._getSoundIds(t),i=0;i<o.length;i++)(n=this._soundById(o[i]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e)&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop));return this},rate:function(){var e,t,n=this,r=arguments;if(0===r.length?t=n._sounds[0]._id:1===r.length?0<=n._getSoundIds().indexOf(r[0])?t=parseInt(r[0],10):e=parseFloat(r[0]):2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),"number"!=typeof e)return((i=n._soundById(t))||n)._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===t&&(n._rate=e),t=n._getSoundIds(t);for(var o,i,a=0;a<t.length;a++)(i=n._soundById(t[a]))&&(n.playing(t[a])&&(i._rateSeek=n.seek(t[a]),i._playStart=n._webAudio?g.ctx.currentTime:i._playStart),i._rate=e,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,g.ctx.currentTime):i._node&&(i._node.playbackRate=e),o=n.seek(t[a]),o=1e3*((n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-o)/Math.abs(i._rate),!n._endTimers[t[a]]&&i._paused||(n._clearTimer(t[a]),n._endTimers[t[a]]=setTimeout(n._ended.bind(n,i),o)),n._emit("rate",i._id));return n},seek:function(){var e,t,n=this,r=arguments;if(0===r.length?t=n._sounds[0]._id:1===r.length?0<=n._getSoundIds().indexOf(r[0])?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0])):2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),void 0===t)return n;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var o=n._soundById(t);if(o){if(!("number"==typeof e&&0<=e)){if(n._webAudio){var i=n.playing(t)?g.ctx.currentTime-o._playStart:0,a=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(a+i*Math.abs(o._rate))}return o._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),o._seek=e,o._ended=!1,n._clearTimer(t),n._webAudio||!o._node||isNaN(o._node.duration)||(o._node.currentTime=e);var s,c=function(){n._emit("seek",t),u&&n.play(t,!0)};u&&!n._webAudio?(s=function(){n._playLock?setTimeout(s,0):c()},setTimeout(s,0)):c()}return n},playing:function(e){if("number"==typeof e){e=this._soundById(e);return!!e&&!e._paused}for(var t=0;t<this._sounds.length;t++)if(!this._sounds[t]._paused)return!0;return!1},duration:function(e){var t=this._duration,e=this._soundById(e);return e&&(t=this._sprite[e._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(g._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),g._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=g._howls.indexOf(e);0<=r&&g._howls.splice(r,1);for(var o=!0,n=0;n<g._howls.length;n++)if(g._howls[n]._src===e._src||0<=e._src.indexOf(g._howls[n]._src)){o=!1;break}return a&&o&&delete a[e._src],g.noAudio=!1,e._state="unloaded",e._sounds=[],e=null},on:function(e,t,n,r){e=this["_on"+e];return"function"==typeof t&&e.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],o=0;if("number"==typeof t&&(n=t,t=null),t||n)for(o=0;o<r.length;o++){var i=n===r[o].id;if(t===r[o].fn&&i||!t&&i){r.splice(o,1);break}}else if(e)this["_on"+e]=[];else for(var a=Object.keys(this),o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(this[a[o]])&&(this[a[o]]=[]);return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],o=r.length-1;0<=o;o--)r[o].id&&r[o].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[o].fn),0),r[o].once&&this.off(e,r[o].fn,r[o].id));return this._loadQueue(e),this},_loadQueue:function(e){var t;return 0<this._queue.length&&((t=this._queue[0]).event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()),this},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[n][2]);return t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r&&(t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=g.ctx.currentTime,n=1e3*(e._stop-e._start)/Math.abs(e._rate),t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),n)),t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),g._autoSuspend()),t._webAudio||r||t.stop(e._id,!0),t},_clearTimer:function(e){var t;return this._endTimers[e]&&("function"!=typeof this._endTimers[e]?clearTimeout(this._endTimers[e]):(t=this._soundById(e))&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1),delete this._endTimers[e]),this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new i(this)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;0<=r;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=g.ctx.createBufferSource(),e._node.bufferSource.buffer=a[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,g.ctx.currentTime),this},_cleanBuffer:function(e){var t=g._navigator&&0<=g._navigator.vendor.indexOf("Apple");if(g._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=g._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(g._navigator&&g._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++g._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=g._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),e._node.gain.setValueAtTime(n,g.ctx.currentTime),e._node.paused=!0,e._node.connect(g.masterGain)):g.noAudio||(e._node=g._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(g._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*g.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++g._counter,e},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(g._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var a={},u=function(t){var e=t._src;if(a[e])return t._duration=a[e].duration,void l(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);c(r.buffer,t)}else{var i=new XMLHttpRequest;i.open(t._xhr.method,e,!0),i.withCredentials=t._xhr.withCredentials,i.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(e){i.setRequestHeader(e,t._xhr.headers[e])}),i.onload=function(){var e=(i.status+"")[0];"0"===e||"2"===e||"3"===e?c(i.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete a[e],t.load())},s(i)}},s=function(t){try{t.send()}catch(e){t.onerror()}},c=function(e,t){function n(){t._emit("loaderror",null,"Decoding audio data failed.")}function r(e){e&&0<t._sounds.length?(a[t._src]=e,l(t,e)):n()}"undefined"!=typeof Promise&&1===g.ctx.decodeAudioData.length?g.ctx.decodeAudioData(e).then(r).catch(n):g.ctx.decodeAudioData(e,r,n)},l=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){if(g.usingWebAudio){try{"undefined"!=typeof AudioContext?g.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?g.ctx=new webkitAudioContext:g.usingWebAudio=!1}catch(e){g.usingWebAudio=!1}g.ctx||(g.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(g._navigator&&g._navigator.platform),t=g._navigator&&g._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=t?parseInt(t[1],10):null;e&&t&&t<9&&(t=/safari/.test(g._navigator&&g._navigator.userAgent.toLowerCase()),g._navigator&&!t&&(g.usingWebAudio=!1)),g.usingWebAudio&&(g.masterGain=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),g.masterGain.gain.setValueAtTime(g._muted?0:g._volume,g.ctx.currentTime),g.masterGain.connect(g.ctx.destination)),g._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:g,Howl:t}}),void 0!==r&&(r.Howler=g,r.Howl=t),void 0!==n?(n.HowlerGlobal=e,n.Howler=g,n.Howl=t,n.Sound=i):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=g,window.Howl=t,window.Sound=i)}(),function(){"use strict";var t,n,r;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;0<=t;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,o,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var u=a._orientation;return t="number"!=typeof t?u[1]:t,n="number"!=typeof n?u[2]:n,r="number"!=typeof r?u[3]:r,o="number"!=typeof o?u[4]:o,i="number"!=typeof i?u[5]:i,"number"!=typeof e?u:(a._orientation=[e,t,n,r,o,i],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,n,r,o,i),a)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(e,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,t)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var o=n._getSoundIds(t),i=0;i<o.length;i++){var a=n._soundById(o[i]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||c(a,r),"spatial"==r?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(e,t,n,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,t,n,r)}}),o;if(t="number"!=typeof t?0:t,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof e)return o._pos;o._pos=[e,t,n]}for(var i=o._getSoundIds(r),a=0;a<i.length;a++){var u=o._soundById(i[a]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,t,n],u._node&&(u._panner&&!u._panner.pan||c(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setPosition(e,t,n)),o._emit("pos",u._id)}}return o},Howl.prototype.orientation=function(e,t,n,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,t,n,r)}}),o;if(t="number"!=typeof t?o._orientation[1]:t,n="number"!=typeof n?o._orientation[2]:n,void 0===r){if("number"!=typeof e)return o._orientation;o._orientation=[e,t,n]}for(var i=o._getSoundIds(r),a=0;a<i.length;a++){var u=o._soundById(i[a]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,t,n],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),c(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):u._panner.setOrientation(e,t,n)),o._emit("orientation",u._id)}}return o},Howl.prototype.pannerAttr=function(){var e,t,n=this,r=arguments;if(!n._webAudio)return n;if(0===r.length)return n._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return((a=n._soundById(parseInt(r[0],10)))||n)._pannerAttr;e=r[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:n._panningModel})}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var o,i,a,u=n._getSoundIds(t),s=0;s<u.length;s++)(a=n._soundById(u[s]))&&(o=a._pannerAttr,o={coneInnerAngle:(void 0!==e.coneInnerAngle?e:o).coneInnerAngle,coneOuterAngle:(void 0!==e.coneOuterAngle?e:o).coneOuterAngle,coneOuterGain:(void 0!==e.coneOuterGain?e:o).coneOuterGain,distanceModel:(void 0!==e.distanceModel?e:o).distanceModel,maxDistance:(void 0!==e.maxDistance?e:o).maxDistance,refDistance:(void 0!==e.refDistance?e:o).refDistance,rolloffFactor:(void 0!==e.rolloffFactor?e:o).rolloffFactor,panningModel:(void 0!==e.panningModel?e:o).panningModel},(i=a._panner)?(i.coneInnerAngle=o.coneInnerAngle,i.coneOuterAngle=o.coneOuterAngle,i.coneOuterGain=o.coneOuterGain,i.distanceModel=o.distanceModel,i.maxDistance=o.maxDistance,i.refDistance=o.refDistance,i.rolloffFactor=o.rolloffFactor,i.panningModel=o.panningModel):(a._pos||(a._pos=n._pos||[0,0,-.5]),c(a,"spatial")));return n},Sound.prototype.init=(n=Sound.prototype.init,function(){var e=this,t=e._parent;e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,n.call(this),e._stereo?t.stereo(e._stereo):e._pos&&t.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}),Sound.prototype.reset=(r=Sound.prototype.reset,function(){var e=this,t=e._parent;return e._orientation=t._orientation,e._stereo=t._stereo,e._pos=t._pos,e._pannerAttr=t._pannerAttr,e._stereo?t.stereo(e._stereo):e._pos?t.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,t._refreshBuffer(e)),r.call(this)});var c=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,n){"use strict";var s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,r,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))c.call(n,a)&&(o[a]=n[a]);if(s){r=s(n);for(var u=0;u<r.length;u++)l.call(n,r[u])&&(o[r[u]]=n[r[u]])}}return o}},{}],35:[function(e,t,n){var r,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s,c=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(p);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}]},{},[22]);
//# sourceMappingURL=bundle-a4756331da.min.js.map
